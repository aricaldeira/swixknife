<!doctype html>
<html lang="{locale.LANG}">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Agòra</title>
        <meta name="description" content="Tenpu i data sezimays">
        <meta name="author" content="Ari Caldeira">
        <meta name="theme-color" content="#000000">
        <link rel="manifest" href="/agòra/manifest.webmanifest" crossorigin="use-credentials" />
        <link rel="icon" type="image/svg+xml" href="/agòra/now-icon.svg" />
        <link rel="stylesheet" type="text/css" href="/static/css/font-andika.css" />
        <link rel="stylesheet" type="text/css" href="https://midia.tauga.online/fonts/iosevka/font-iosevka-qp.css" />
        <link rel="stylesheet" type="text/css" href="https://midia.tauga.online/fonts/noto/font-noto.css" />
        <link rel="stylesheet" type="text/css" href="/static/css/now.css" />
    </head>
    <body>
        <span {'dir="rtl"' if locale.RTL else ""}>
            {date_time.format('#W', locale)}<br/>
            <table id="landscape_content" width="100%">
                <tbody>
                    <tr>
                        <td colspan="3">
                            <span id="sezimal_time_ls" class="sezimal_time_landscape sezimal_digits" data-tooltip=" 99:99:99 " {'dir="rtl"' if locale.RTL else ""}>{date_time.format(time_format, locale)}</span><br/>
                            <span id="sezimal_time_spellout_uta_ls"    class="spellout" style="text-align: right;"  {'dir="rtl"' if locale.RTL else ""}></span>
                            <span id="sezimal_time_spellout_posha_ls"  class="spellout" style="text-align: center;" {'dir="rtl"' if locale.RTL else ""}></span>
                            <span id="sezimal_time_spellout_agrima_ls" class="spellout" style="text-align: left;"   {'dir="rtl"' if locale.RTL else ""}></span>
                            <br/>
                            <br/>
                        </td>
                    </tr>
                    <tr>
                        <td width="33.33%">
                            <span data-tooltip=" {date_time.format(season_format.replace('@', ''), locale)} " {'dir="rtl"' if locale.RTL else ""} class="emoji">{date_time.format(season_format, locale)}</span>
                        </td>
                        <td width="33.33%">
                            <span class="sezimal_date" data-tooltip=" ISO {date_time.format(locale.ISO_DATE_FORMAT, locale)}{' ― ' + spellout if spellout else ''} " {'dir="rtl"' if locale.RTL else ""}>{date_time.format(date_format, locale)}</span><br/>
                            <span class="sezimal_temperature" data-tooltip=" {decimal_temperature} " {'dir="rtl"' if locale.RTL else ""}>{sezimal_temperature}</span>
                        </td>
                        <td width="33.33%">
                            <span data-tooltip=" {date_time.format(moon_format.replace('@', ''), locale)} " {'dir="rtl"' if locale.RTL else ""} class="emoji">{date_time.format(moon_format, locale)}</span>
                        </td>
                    </tr>
                </tbody>
            </table>
            <span id="portrait_content" hidden>
                <span id="sezimal_time_pt" class="sezimal_time sezimal_digits" data-tooltip=" 99:99:99 ">{date_time.format(time_format, locale)}</span><br/>
                <span data-tooltip=" ISO {date_time.format(locale.ISO_DATE_FORMAT, locale)}{' ― ' + spellout if spellout else ''} ">{date_time.format(date_format, locale)}<br/><!-- <span class="sezimal_digits">{date_time.format(date_format.replace("#", "#@!").replace('/', '‐'), locale)}</span> --></span><br/>
                <span data-tooltip=" {decimal_temperature} " {'dir="rtl"' if locale.RTL else ""}>{sezimal_temperature}</span><br/>
                <span data-tooltip=" {date_time.format(season_format.replace('@', ''), locale)} " class="emoji">{date_time.format(season_format, locale)}</span><br/>
                <span data-tooltip=" {date_time.format(moon_format.replace('@', ''), locale)} " class="emoji">{date_time.format(moon_format, locale)}</span><br/>
            </span>
        </span>
        <br />
        <table>
            <thead>
                <tr><th colspan="7" data-tooltip=" ISO {locale.digit_replace(date_time.format('#9gy', locale))} ― Sezimal Holocene {locale.digit_replace(date_time.format('#9Y', locale))}{' ― ' + spellout_year if spellout_year else ''} ">{locale.digit_replace(date_time.format('#X', locale))}</th></tr>
                <tr><th colspan="7">{date_time.format('#!M', locale)}</th></tr>
                <tr>
                    <th {'class="weekday_monday"'    if date_time.weekday ==  1 else ''} data-tooltip=" {locale.WEEKDAY_NAME[0]} "> {locale.WEEKDAY_ABBREVIATED_NAME[0]} </th>
                    <th {'class="weekday_tuesday"'   if date_time.weekday ==  2 else ''} data-tooltip=" {locale.WEEKDAY_NAME[1]} "> {locale.WEEKDAY_ABBREVIATED_NAME[1]} </th>
                    <th {'class="weekday_wednesday"' if date_time.weekday ==  3 else ''} data-tooltip=" {locale.WEEKDAY_NAME[2]} "> {locale.WEEKDAY_ABBREVIATED_NAME[2]} </th>
                    <th {'class="weekday_thursday"'  if date_time.weekday ==  4 else ''} data-tooltip=" {locale.WEEKDAY_NAME[3]} "> {locale.WEEKDAY_ABBREVIATED_NAME[3]} </th>
                    <th {'class="weekday_friday"'    if date_time.weekday ==  5 else ''} data-tooltip=" {locale.WEEKDAY_NAME[4]} "> {locale.WEEKDAY_ABBREVIATED_NAME[4]} </th>
                    <th {'class="weekday_saturday"'  if date_time.weekday == 10 else ''} data-tooltip=" {locale.WEEKDAY_NAME[5]} "> {locale.WEEKDAY_ABBREVIATED_NAME[5]} </th>
                    <th {'class="weekday_sunday"'    if date_time.weekday == 11 else ''} data-tooltip=" {locale.WEEKDAY_NAME[6]} "> {locale.WEEKDAY_ABBREVIATED_NAME[6]} </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td {'class="weekday_monday"'    if date_time.day ==  1 else ''} data-tooltip=" {date_time.replace(day= 1).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('1')}{'º' if locale.LANG.startswith('pt') else ''}{'ᵘ̱' if locale.LANG.startswith('bz') else ''} </td>
                    <td {'class="weekday_tuesday"'   if date_time.day ==  2 else ''} data-tooltip=" {date_time.replace(day= 2).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('2')} </td>
                    <td {'class="weekday_wednesday"' if date_time.day ==  3 else ''} data-tooltip=" {date_time.replace(day= 3).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('3')} </td>
                    <td {'class="weekday_thursday"'  if date_time.day ==  4 else ''} data-tooltip=" {date_time.replace(day= 4).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('4')} </td>
                    <td {'class="weekday_friday"'    if date_time.day ==  5 else ''} data-tooltip=" {date_time.replace(day= 5).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('5')} </td>
                    <td {'class="weekday_saturday"'  if date_time.day == 10 else ''} data-tooltip=" {date_time.replace(day=10).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('10')} </td>
                    <td {'class="weekday_sunday"'    if date_time.day == 11 else ''} data-tooltip=" {date_time.replace(day=11).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('11')} </td>
                </tr>
                <tr>
                    <td {'class="weekday_monday"'    if date_time.day == 12 else ''} data-tooltip=" {date_time.replace(day=12).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('12')} </td>
                    <td {'class="weekday_tuesday"'   if date_time.day == 13 else ''} data-tooltip=" {date_time.replace(day=13).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('13')} </td>
                    <td {'class="weekday_wednesday"' if date_time.day == 14 else ''} data-tooltip=" {date_time.replace(day=14).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('14')} </td>
                    <td {'class="weekday_thursday"'  if date_time.day == 15 else ''} data-tooltip=" {date_time.replace(day=15).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('15')} </td>
                    <td {'class="weekday_friday"'    if date_time.day == 20 else ''} data-tooltip=" {date_time.replace(day=20).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('20')} </td>
                    <td {'class="weekday_saturday"'  if date_time.day == 21 else ''} data-tooltip=" {date_time.replace(day=21).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('21')} </td>
                    <td {'class="weekday_sunday"'    if date_time.day == 22 else ''} data-tooltip=" {date_time.replace(day=22).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('22')} </td>
                </tr>
                <tr>
                    <td {'class="weekday_monday"'    if date_time.day == 23 else ''} data-tooltip=" {date_time.replace(day=23).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('23')} </td>
                    <td {'class="weekday_tuesday"'   if date_time.day == 24 else ''} data-tooltip=" {date_time.replace(day=24).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('24')} </td>
                    <td {'class="weekday_wednesday"' if date_time.day == 25 else ''} data-tooltip=" {date_time.replace(day=25).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('25')} </td>
                    <td {'class="weekday_thursday"'  if date_time.day == 30 else ''} data-tooltip=" {date_time.replace(day=30).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('30')} </td>
                    <td {'class="weekday_friday"'    if date_time.day == 31 else ''} data-tooltip=" {date_time.replace(day=31).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('31')} </td>
                    <td {'class="weekday_saturday"'  if date_time.day == 32 else ''} data-tooltip=" {date_time.replace(day=32).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('32')} </td>
                    <td {'class="weekday_sunday"'    if date_time.day == 33 else ''} data-tooltip=" {date_time.replace(day=33).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('33')} </td>
                </tr>
                <tr>
                    <td {'class="weekday_monday"'    if date_time.day == 34 else ''} data-tooltip=" {date_time.replace(day=34).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('34')} </td>
                    <td {'class="weekday_tuesday"'   if date_time.day == 35 else ''} data-tooltip=" {date_time.replace(day=35).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('35')} </td>
                    <td {'class="weekday_wednesday"' if date_time.day == 40 else ''} data-tooltip=" {date_time.replace(day=40).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('40')} </td>
                    <td {'class="weekday_thursday"'  if date_time.day == 41 else ''} data-tooltip=" {date_time.replace(day=41).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('41')} </td>
                    <td {'class="weekday_friday"'    if date_time.day == 42 else ''} data-tooltip=" {date_time.replace(day=42).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('42')} </td>
                    <td {'class="weekday_saturday"'  if date_time.day == 43 else ''} data-tooltip=" {date_time.replace(day=43).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('43')} </td>
                    <td {'class="weekday_sunday"'    if date_time.day == 44 else ''} data-tooltip=" {date_time.replace(day=44).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('44')} </td>
                </tr>
                <tr {'hidden=""' if not date_time.is_long_month else ''}>
                    <td {'class="weekday_tuesday"'   if date_time.day == 45 else ''} data-tooltip=" {date_time.replace(day=45).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('45')} </td>
                    <td {'class="weekday_wednesday"' if date_time.day == 50 else ''} data-tooltip=" {date_time.replace(day=50).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('50')} </td>
                    <td {'class="weekday_thursday"'  if date_time.day == 51 else ''} data-tooltip=" {date_time.replace(day=51).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('51')} </td>
                    <td {'class="weekday_friday"'    if date_time.day == 52 else ''} data-tooltip=" {date_time.replace(day=52).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('52')} </td>
                    <td {'class="weekday_saturday"'  if date_time.day == 53 else ''} data-tooltip=" {date_time.replace(day=53).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('53')} </td>
                    <td {'class="weekday_sunday"'    if date_time.day == 54 else ''} data-tooltip=" {date_time.replace(day=54).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('54')} </td>
                    <td {'class="weekday_sunday"'    if date_time.day == 55 else ''} data-tooltip=" {date_time.replace(day=55).format('ISO ' + locale.ISO_DATE_FORMAT + ' ― ' + date_format, locale)} "> {locale.digit_replace('55')} </td>
                </tr>
            </tbody>
        </table>
        <br />
        <script type="text/javascript">
function auto_refresh(){{
    var date = new Date();
    var seconds = date.getTime();
    var digits = '{digits}';
    var lang = '{locale.LANG[0:2]}';
    const PAIRS = {{
        '00': '󱸀󱸀', '01': '󱸀󱸁', '02': '󱸀󱸂', '03': '󱸀󱸃', '04': '󱸀󱸄', '05': '󱸀󱸅',
        '10': '󱸁󱸀', '11': '󱸁󱸁', '12': '󱸁󱸂', '13': '󱸁󱸃', '14': '󱸁󱸄', '15': '󱸁󱸅',
        '20': '󱸂󱸀', '21': '󱸂󱸁', '22': '󱸂󱸂', '23': '󱸂󱸃', '24': '󱸂󱸄', '25': '󱸂󱸅',
        '30': '󱸃󱸀', '31': '󱸃󱸁', '32': '󱸃󱸂', '33': '󱸃󱸃', '34': '󱸃󱸄', '35': '󱸃󱸅',
        '40': '󱸄󱸀', '41': '󱸄󱸁', '42': '󱸄󱸂', '43': '󱸄󱸃', '44': '󱸄󱸄', '45': '󱸄󱸅',
        '50': '󱸅󱸀', '51': '󱸅󱸁', '52': '󱸅󱸂', '53': '󱸅󱸃', '54': '󱸅󱸄', '55': '󱸅󱸅',
    }};
    const NAMES = {{
        '00': 'zèru',
        '01': 'un',
        '02': 'doys',
        '03': 'treys',
        '04': 'kwatru',
        '05': 'sinku',
        '10': 'sêys',
        '11': 'sèti',
        '12': 'oytu',
        '13': 'nòvi',
        '14': 'dèys',
        '15': 'onzi',
        '20': 'dozi',
        '21': 'dozi i un',
        '22': 'dozi i doys',
        '23': 'dozi i treys',
        '24': 'dozi i kwatru',
        '25': 'dozi i sinku',
        '30': 'treseys',
        '31': 'treseys i un',
        '32': 'treseys i doys',
        '33': 'treseys i treys',
        '34': 'treseys i kwatru',
        '35': 'treseys i sinku',
        '40': 'kwaseys',
        '41': 'kwaseys i un',
        '42': 'kwaseys i doys',
        '43': 'kwaseys i treys',
        '44': 'kwaseys i kwatru',
        '45': 'kwaseys i sinku',
        '50': 'kinseys',
        '51': 'kinseys i un',
        '52': 'kinseys i doys',
        '53': 'kinseys i treys',
        '54': 'kinseys i kwatru',
        '55': 'kinseys i sinku',
    }};
    // const NAMES = {{
    //     '00': 'zero',
    //     '01': 'um',
    //     '02': 'dois',
    //     '03': 'três',
    //     '04': 'quatro',
    //     '05': 'cinco',
    //     '10': 'seis',
    //     '11': 'sete',
    //     '12': 'oito',
    //     '13': 'nove',
    //     '14': 'dez',
    //     '15': 'onze',
    //     '20': 'doze',
    //     '21': 'doze e um',
    //     '22': 'doze e dois',
    //     '23': 'doze e três',
    //     '24': 'doze e quatro',
    //     '25': 'doze e cinco',
    //     '30': 'tresseis',
    //     '31': 'tresseis e um',
    //     '32': 'tresseis e dois',
    //     '33': 'tresseis e três',
    //     '34': 'tresseis e quatro',
    //     '35': 'tresseis e cinco',
    //     '40': 'quasseis',
    //     '41': 'quasseis e um',
    //     '42': 'quasseis e dois',
    //     '43': 'quasseis e três',
    //     '44': 'quasseis e quatro',
    //     '45': 'quasseis e cinco',
    //     '50': 'quinseis',
    //     '51': 'quinseis e um',
    //     '52': 'quinseis e dois',
    //     '53': 'quinseis e três',
    //     '54': 'quinseis e quatro',
    //     '55': 'quinseis e cinco',
    // }};

    seconds = (seconds + {time_zone_offset.decimal}) / 1000 / 86400;
    seconds = seconds - Math.floor(seconds);
    var agrima = seconds * 36 * 36 * 36;

    var time = Math.floor(agrima).toString(6).padStart(6, '0');
    var uta = time.slice(0, 2);
    var posha = time.slice(2, 4);
    var agrima = time.slice(4, 6);

    //
    // Reload page from server, and update temperature
    // (and calendar at midnight)
    //
    if (agrima === '00') {{
        if (posha === '00' || posha === '13' || posha === '30' || posha === '43') {{
            location.reload();
        }}
    }};

    // time = PAIRS[uta] + ':' + PAIRS[posha] + ':' + PAIRS[agrima];
    // time = PAIRS[uta] + '󱹷' + PAIRS[posha] + '󱹷' + PAIRS[agrima];
    //time = uta + ':' + posha + ':' + agrima;
    time = uta + '󱹮' + posha + '󱹮' + agrima;

    if (uta == '01') {{
        document.getElementById("sezimal_time_spellout_uta_ls").innerText = NAMES[uta]; // + ' uta';
    }} else {{
        document.getElementById("sezimal_time_spellout_uta_ls").innerText = NAMES[uta]; // + ' utas';
    }};

    if (posha == '01') {{
        document.getElementById("sezimal_time_spellout_posha_ls").innerText = NAMES[posha]; // + ' poxa';
    }} else {{
        document.getElementById("sezimal_time_spellout_posha_ls").innerText = NAMES[posha]; // + ' poxas';
    }};

    if (agrima == '01') {{
        document.getElementById("sezimal_time_spellout_agrima_ls").innerText = NAMES[agrima]; // + ' agrima';
    }} else {{
        document.getElementById("sezimal_time_spellout_agrima_ls").innerText = NAMES[agrima]; // + ' agrimas';
    }};

    //
    // Regular time in tooltip
    //
    seconds = Math.floor(seconds * 60 * 60 * 24);

    var hours = Math.floor(seconds / 60 / 60);
    seconds = seconds - (hours * 60 * 60);

    var minutes = Math.floor(seconds / 60);
    seconds = seconds - (minutes * 60);

    minutes = minutes.toString().padStart(2, '0');
    seconds = seconds.toString().padStart(2, '0');

    if (lang === 'en') {{
        if (hours > 12) {{
            hours = hours - 12;
            am_pm = ' pm';
        }} else if (hours == 12) {{
            am_pm = ' pm';
        }} else {{
            am_pm = ' am';
        }};

        hours = hours.toString().padStart(2, '0');

        var decimal_time = hours + ':' + minutes + ':' + seconds + am_pm;
    }} else {{
        hours = hours.toString().padStart(2, '0');
        var decimal_time = hours + ':' + minutes + ':' + seconds;
    }};

    if (digits !== '') {{
        for(var i = 0; i < 10; i++) {{
            time = time.replaceAll(i.toString(), digits.slice(i, i+1));
            decimal_time = decimal_time.replaceAll(i.toString(), digits.slice(i, i+1));
        }};
    }};

    console.log('time', time);

    document.getElementById("sezimal_time_ls").innerText = time;
    document.getElementById("sezimal_time_ls").textContent = time;
    document.getElementById("sezimal_time_ls").attributes['data-tooltip'].value = decimal_time;

    document.getElementById("sezimal_time_pt").innerText = time;
    document.getElementById("sezimal_time_pt").textContent = time;
    document.getElementById("sezimal_time_pt").attributes['data-tooltip'].value = decimal_time;

    setTimeout(auto_refresh, 925);
}};
auto_refresh();

if (navigator.userAgent.toUpperCase().indexOf('MOBILE') > 0) {{
    document.querySelector("body").requestFullscreen();
}};

function update_orientation() {{
    if (
        navigator.userAgentData === undefined
        || !navigator.userAgentData.mobile
        || screen.orientation.type === 'portrait-primary'
        || screen.orientation.type === 'portrait-secondary'
    ) {{
        document.getElementById("portrait_content").removeAttribute('hidden');
        document.getElementById("landscape_content").setAttribute('hidden', '');
    }} else {{
        document.getElementById("portrait_content").setAttribute('hidden', '');
        document.getElementById("landscape_content").removeAttribute('hidden');
    }};
}};

screen.orientation.addEventListener("change", (event) => {{
    update_orientation();
}});

update_orientation();

        </script>
    </body>
</html>
