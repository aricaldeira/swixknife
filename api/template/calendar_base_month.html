{% set WEEKS = SezimalDictionary({0: '0', 1: '1', 2: '2', 3: '3', 4: '4', 5: '5', 10: '10', 11: '11', 12: '12', 13: '13', 14: '14', 15: '15', 20: '20', 21: '21', 22: '22', 23: '23', 24: '24', 25: '25', 30: '30', 31: '31', 32: '32', 33: '33', 34: '34', 35: '35', 40: '40', 41: '41', 42: '42', 43: '43', 44: '44', 45: '45', 50: '50', 51: '51', 52: '52', 53: '53', 54: '54', 55: '55', 100: '100', 101: '101', 102: '102', 103: '103', 104: '104', 105: '105', 110: '110', 111: '111', 112: '112', 113: '113', 114: '114', 115: '115', 120: '120', 121: '121', 122: '122', 123: '123', 124: '124', 125: '125'}) %}
{% set DAYS = SezimalList([
    SezimalList([ 1,  2,  3,  4,  5, 10, 11]),
    SezimalList([12, 13, 14, 15, 20, 21, 22]),
    SezimalList([23, 24, 25, 30, 31, 32, 33]),
    SezimalList([34, 35, 40, 41, 42, 43, 44]),
    SezimalList([45, 50, 51, 52, 53, 54, 55]),
    ])
%}

{% if sezimal_month_number == 1 %}
    {% set month_number = 0 %}
    {% set weeks = SezimalList([1, 2, 3, 4]) %}
    {% set moon_month = 'moon_01' %}
{% endif %}
{% if sezimal_month_number  ==  2 %}
    {% set month_number = 1 %}
    {% set weeks = SezimalList([5, 10, 11, 12, 13]) %}
    {% set moon_month = 'moon_02' %}
{% endif %}
{% if sezimal_month_number  ==  3 %}
    {% set month_number = 2 %}
    {% set weeks = SezimalList([14, 15, 20, 21]) %}
    {% set moon_month = 'moon_03' %}
{% endif %}
{% if sezimal_month_number  ==  4 %}
    {% set month_number = 3 %}
    {% set weeks = SezimalList([22, 23, 24, 25]) %}
    {% set moon_month = 'moon_04' %}
{% endif %}
{% if sezimal_month_number  ==  5 %}
    {% set month_number = 4 %}
    {% set weeks = SezimalList([30, 31, 32, 33, 34]) %}
    {% set moon_month = 'moon_05' %}
{% endif %}
{% if sezimal_month_number  ==  10 %}
    {% set month_number = 5 %}
    {% set weeks = SezimalList([35, 40, 41, 42]) %}
    {% set moon_month = 'moon_10' %}
{% endif %}
{% if sezimal_month_number  ==  11 %}
    {% set month_number = 6 %}
    {% set weeks = SezimalList([43, 44, 45, 50]) %}
    {% set moon_month = 'moon_11' %}
{% endif %}
{% if sezimal_month_number  ==  12 %}
    {% set month_number = 7 %}
    {% set weeks = SezimalList([51, 52, 53, 54, 55]) %}
    {% set moon_month = 'moon_12' %}
{% endif %}
{% if sezimal_month_number  ==  13 %}
    {% set month_number = 8 %}
    {% set weeks = SezimalList([100, 101, 102, 103]) %}
    {% set moon_month = 'moon_13' %}
{% endif %}
{% if sezimal_month_number  ==  14 %}
    {% set month_number = 9 %}
    {% set weeks = SezimalList([104, 105, 110, 111]) %}
    {% set moon_month = 'moon_14' %}
{% endif %}
{% if sezimal_month_number  ==  15 %}
    {% set month_number = 10 %}
    {% set weeks = SezimalList([112, 113, 114, 115, 120]) %}
    {% set moon_month = 'moon_15' %}
{% endif %}
{% if sezimal_month_number  ==  20 %}
    {% set month_number = 11 %}
    {% set weeks = SezimalList([121, 122, 123, 124]) %}
    {% set moon_month = 'moon_20' %}

    {% if (reference_date and date.is_leap) or date.is_leap %}
        {% set weeks = SezimalList([121, 122, 123, 124, 125]) %}
    {% endif %}
{% endif %}

{% if base == 14 %}
    {% set NUMBERS = SezimalDictionary({0: '0', 1: '1', 2: '2', 3: '3', 4: '4', 5: '5', 10: '6', 11: '7', 12: '8', 13: '9', 14: '10', 15: '11', 20: '12', 21: '13', 22: '14', 23: '15', 24: '16', 25: '17', 30: '18', 31: '19', 32: '20', 33: '21', 34: '22', 35: '23', 40: '24', 41: '25', 42: '26', 43: '27', 44: '28', 45: '29', 50: '30', 51: '31', 52: '32', 53: '33', 54: '34', 55: '35', 100: '36', 101: '37', 102: '38', 103: '39', 104: '40', 105: '41', 110: '42', 111: '43', 112: '44', 113: '45', 114: '46', 115: '47', 120: '48', 121: '49', 122: '50', 123: '51', 124: '52', 125: '53', 1404: '364', 1415: '371'}) %}
{% elif base == 20 %}
    {% set NUMBERS = SezimalDictionary({0: '0', 1: '1', 2: '2', 3: '3', 4: '4', 5: '5', 10: '6', 11: '7', 12: '8', 13: '9', 14: '↊', 15: '↋', 20: '10', 21: '11', 22: '12', 23: '13', 24: '14', 25: '15', 30: '16', 31: '17', 32: '18', 33: '19', 34: '1↊', 35: '1↋', 40: '20', 41: '21', 42: '22', 43: '23', 44: '24', 45: '25', 50: '26', 51: '27', 52: '28', 53: '29', 54: '2↊', 55: '2↋', 100: '30', 101: '31', 102: '32', 103: '33', 104: '34', 105: '35', 110: '36', 111: '37', 112: '38', 113: '39', 114: '3↊', 115: '3↋', 120: '40', 121: '41', 122: '42', 123: '43', 124: '44', 125: '45', 1404: '264', 1415: '26↋'}) %}
{% else %}
    {% set NUMBERS = SezimalDictionary({0: '0', 1: '1', 2: '2', 3: '3', 4: '4', 5: '5', 10: '10', 11: '11', 12: '12', 13: '13', 14: '14', 15: '15', 20: '20', 21: '21', 22: '22', 23: '23', 24: '24', 25: '25', 30: '30', 31: '31', 32: '32', 33: '33', 34: '34', 35: '35', 40: '40', 41: '41', 42: '42', 43: '43', 44: '44', 45: '45', 50: '50', 51: '51', 52: '52', 53: '53', 54: '54', 55: '55', 100: '100', 101: '101', 102: '102', 103: '103', 104: '104', 105: '105', 110: '110', 111: '111', 112: '112', 113: '113', 114: '114', 115: '115', 120: '120', 121: '121', 122: '122', 123: '123', 124: '124', 125: '125', 1404: '1404', 1415: '1415'}) %}

    {% if sezimal_digits or format_token == '!' %}
        {% set NUMBERS = SezimalDictionary({0: '󱸀', 1: '󱸁', 2: '󱸂', 3: '󱸃', 4: '󱸄', 5: '󱸅', 10: '󱸁󱸀', 11: '󱸁󱸁', 12: '󱸁󱸂', 13: '󱸁󱸃', 14: '󱸁󱸄', 15: '󱸁󱸅', 20: '󱸂󱸀', 21: '󱸂󱸁', 22: '󱸂󱸂', 23: '󱸂󱸃', 24: '󱸂󱸄', 25: '󱸂󱸅', 30: '󱸃󱸀', 31: '󱸃󱸁', 32: '󱸃󱸂', 33: '󱸃󱸃', 34: '󱸃󱸄', 35: '󱸃󱸅', 40: '󱸄󱸀', 41: '󱸄󱸁', 42: '󱸄󱸂', 43: '󱸄󱸃', 44: '󱸄󱸄', 45: '󱸄󱸅', 50: '󱸅󱸀', 51: '󱸅󱸁', 52: '󱸅󱸂', 53: '󱸅󱸃', 54: '󱸅󱸄', 55: '󱸅󱸅', 100: '󱸁󱸀󱸀', 101: '󱸁󱸀󱸁', 102: '󱸁󱸀󱸂', 103: '󱸁󱸀󱸃', 104: '󱸁󱸀󱸄', 105: '󱸁󱸀󱸅', 110: '󱸁󱸁󱸀', 111: '󱸁󱸁󱸁', 112: '󱸁󱸁󱸂', 113: '󱸁󱸁󱸃', 114: '󱸁󱸁󱸄', 115: '󱸁󱸁󱸅', 120: '󱸁󱸂󱸀', 121: '󱸁󱸂󱸁', 122: '󱸁󱸂󱸂', 123: '󱸁󱸂󱸃', 124: '󱸁󱸂󱸄', 125: '󱸁󱸂󱸅', 1404: '󱸁󱸄󱸀󱸄', 1415: '󱸁󱸄󱸁󱸅'}) %}
    {% endif %}
{% endif %}

{% if (not year_view) %}
    {% set MONTH_LINE_HEIGHT = '3rem' %}
    {% set WEEK_LINE_HEIGHT = '2.5rem' %}
    {% set MONTH_FONT_SIZE = '1.5rem' %}
    {% set WEEK_FONT_SIZE = '0.80rem' %}
    {% set DAY_IN_YEAR_FONT_SIZE = '0.50rem' %}
    {% set EMOJI_FONT_SIZE = '1.5rem' %}
    {% set DATE_FONT_SIZE = '1.30rem' %}
    {% set TODAY_FONT_SIZE = '1.60rem' %}
    {% set EVENTS_FONT_SIZE = '1rem' %}
{% else %}
    {% set MONTH_LINE_HEIGHT = '2rem' %}
    {% set WEEK_LINE_HEIGHT = '1.5rem' %}
    {% set MONTH_FONT_SIZE = '1rem' %}
    {% set WEEK_FONT_SIZE = '0.50rem' %}
    {% set DAY_IN_YEAR_FONT_SIZE = '0.30rem' %}
    {% set EMOJI_FONT_SIZE = '1.2rem' %}
    {% set DATE_FONT_SIZE = '1rem' %}
    {% set TODAY_FONT_SIZE = '1.10rem' %}
    {% set EVENTS_FONT_SIZE = '0.75rem' %}
{% endif %}

{% if locale.DIGITS and format_token != '!' %}
    {% for i in NUMBERS %}
        {% set NUMBERS = NUMBERS.update({i: locale.digit_replace(NUMBERS[i])}) %}
    {% endfor %}
{% endif %}


{% if month_view or week_view %}
{% else %}
<table class="center" style="border-spacing: 0px;">
    <colgroup>
        <col span="1">
        <col span="1">
        <col span="1">
        <col span="1">
    </colgroup>
    <tr style="vertical-align: middle;">
        {% if locale.RTL %}
            <td style="line-height: {{MONTH_LINE_HEIGHT}}; background-color: {{colors[weeks[0]][shade_month]}}; color: {{'black' if gray_scale else 'white'}}; font-weight: bold;">{{NUMBERS[sezimal_month_number]}}</td>
        {% else %}
            {% if sezimal_month_number in (1, 2, 3) %}
                <td style="line-height: {{MONTH_LINE_HEIGHT}}; background-color: {{colors[weeks[0]][shade_month]}}; color: {{'black' if gray_scale else 'white'}}; font-weight: bold;">{{NUMBERS[1]}}</td>
            {% elif sezimal_month_number in (4, 5, 10) %}
                <td style="line-height: {{MONTH_LINE_HEIGHT}}; background-color: {{colors[weeks[0]][shade_month]}}; color: {{'black' if gray_scale else 'white'}}; font-weight: bold;">{{NUMBERS[2]}}</td>
            {% elif sezimal_month_number in (11, 12, 13) %}
                <td style="line-height: {{MONTH_LINE_HEIGHT}}; background-color: {{colors[weeks[0]][shade_month]}}; color: {{'black' if gray_scale else 'white'}}; font-weight: bold;">{{NUMBERS[3]}}</td>
            {% else %}
                <td style="line-height: {{MONTH_LINE_HEIGHT}}; background-color: {{colors[weeks[0]][shade_month]}}; color: {{'black' if gray_scale else 'white'}}; font-weight: bold;">{{NUMBERS[4]}}</td>
            {% endif %}
        {% endif %}
        {% if (not base) or base == 10 %}
        <td colspan="2" style="line-height: {{MONTH_LINE_HEIGHT}}; background-color: {{colors[weeks[0]][shade_month]}}; color: {{'black' if gray_scale else 'white'}}; font-weight: bold; font-size: {{MONTH_FONT_SIZE}};">{{locale.upper(locale.MONTH_NAME[month_number])}}</td>
        {% else %}
        <td colspan="2" style="line-height: {{MONTH_LINE_HEIGHT}}; background-color: {{colors[weeks[0]][shade_month]}}; color: {{'black' if gray_scale else 'white'}}; font-weight: bold; font-size: {{MONTH_FONT_SIZE}};">{{locale.upper(locale.ISO_MONTH_NAME[month_number])}}</td>
        {% endif %}
        {% if locale.RTL %}
            {% if sezimal_month_number in (1, 2, 3) %}
                <td style="line-height: {{MONTH_LINE_HEIGHT}}; background-color: {{colors[weeks[0]][shade_month]}}; color: {{'black' if gray_scale else 'white'}}; font-weight: bold;">{{NUMBERS[1]}}</td>
            {% elif sezimal_month_number in (4, 5, 10) %}
                <td style="line-height: {{MONTH_LINE_HEIGHT}}; background-color: {{colors[weeks[0]][shade_month]}}; color: {{'black' if gray_scale else 'white'}}; font-weight: bold;">{{NUMBERS[2]}}</td>
            {% elif sezimal_month_number in (11, 12, 13) %}
                <td style="line-height: {{MONTH_LINE_HEIGHT}}; background-color: {{colors[weeks[0]][shade_month]}}; color: {{'black' if gray_scale else 'white'}}; font-weight: bold;">{{NUMBERS[3]}}</td>
            {% else %}
                <td style="line-height: {{MONTH_LINE_HEIGHT}}; background-color: {{colors[weeks[0]][shade_month]}}; color: {{'black' if gray_scale else 'white'}}; font-weight: bold;">{{NUMBERS[4]}}</td>
            {% endif %}
        {% else %}
            <td style="line-height: {{MONTH_LINE_HEIGHT}}; background-color: {{colors[weeks[0]][shade_month]}}; color: {{'black' if gray_scale else 'white'}}; font-weight: bold;">{{NUMBERS[sezimal_month_number]}}</td>
        {% endif %}
    </tr>
</table>
{% endif %}
<table class="center" style="border-spacing: 0px;">
    <colgroup>
    {% if not year_view %}
        <col span="1" width="6%">
    {% else %}
        <col span="1">
    {% endif %}
        <col span="1">
        <col span="1">
        <col span="1">
        <col span="1">
        <col span="1">
        <col span="1">
        <col span="1">
    </colgroup>
    <tr style="vertical-align: middle;">
        <td style="line-height: {{WEEK_LINE_HEIGHT}}; font-size: {{DATE_FONT_SIZE}}; color: {{colors[weeks[0]][shade_week_number]}}; font-size: {{WEEK_FONT_SIZE}}; border-{{ 'left' if locale.RTL else 'right' }}: 1px solid {{colors[weeks[0]][shade_week_number]}}; border-bottom: 1px solid {{colors[weeks[0]][shade_week_number]}};">{{ locale.WEEK_NUMBER_SYMBOL }}</td>
        {% if weekday_name_size > 1 %}
            <td style="line-height: {{WEEK_LINE_HEIGHT}}; font-size: {{DATE_FONT_SIZE}}; color: {{colors[weeks[0]][shade_01]}}; {% if date.month == sezimal_month_number and date.weekday ==  1 %}background-color: {{ colors[weeks[0]][back_shade_01] }}; color: {{ colors[weeks[0]][text_shade_01] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %} border-bottom: 1px solid;">{{locale.upper(locale.WEEKDAY_ABBREVIATED_NAME[0][0:weekday_name_size])}}</td>
            <td style="line-height: {{WEEK_LINE_HEIGHT}}; font-size: {{DATE_FONT_SIZE}}; color: {{colors[weeks[0]][shade_02]}}; {% if date.month == sezimal_month_number and date.weekday ==  2 %}background-color: {{ colors[weeks[0]][back_shade_02] }}; color: {{ colors[weeks[0]][text_shade_02] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %} border-bottom: 1px solid;">{{locale.upper(locale.WEEKDAY_ABBREVIATED_NAME[1][0:weekday_name_size])}}</td>
            <td style="line-height: {{WEEK_LINE_HEIGHT}}; font-size: {{DATE_FONT_SIZE}}; color: {{colors[weeks[0]][shade_03]}}; {% if date.month == sezimal_month_number and date.weekday ==  3 %}background-color: {{ colors[weeks[0]][back_shade_03] }}; color: {{ colors[weeks[0]][text_shade_03] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %} border-bottom: 1px solid;">{{locale.upper(locale.WEEKDAY_ABBREVIATED_NAME[2][0:weekday_name_size])}}</td>
            <td style="line-height: {{WEEK_LINE_HEIGHT}}; font-size: {{DATE_FONT_SIZE}}; color: {{colors[weeks[0]][shade_04]}}; {% if date.month == sezimal_month_number and date.weekday ==  4 %}background-color: {{ colors[weeks[0]][back_shade_04] }}; color: {{ colors[weeks[0]][text_shade_04] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %} border-bottom: 1px solid;">{{locale.upper(locale.WEEKDAY_ABBREVIATED_NAME[3][0:weekday_name_size])}}</td>
            <td style="line-height: {{WEEK_LINE_HEIGHT}}; font-size: {{DATE_FONT_SIZE}}; color: {{colors[weeks[0]][shade_05]}}; {% if date.month == sezimal_month_number and date.weekday ==  5 %}background-color: {{ colors[weeks[0]][back_shade_05] }}; color: {{ colors[weeks[0]][text_shade_05] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %} border-bottom: 1px solid;">{{locale.upper(locale.WEEKDAY_ABBREVIATED_NAME[4][0:weekday_name_size])}}</td>
            <td style="line-height: {{WEEK_LINE_HEIGHT}}; font-size: {{DATE_FONT_SIZE}}; color: {{colors[weeks[0]][shade_10]}}; {% if date.month == sezimal_month_number and date.weekday == 10 %}background-color: {{ colors[weeks[0]][back_shade_10] }}; color: {{ colors[weeks[0]][text_shade_10] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %} border-{{ 'right' if locale.RTL else 'left' }}: 3px solid {{colors[weeks[0]][shade_10]}}; padding-{{ 'right' if locale.RTL else 'left' }}: 3px; border-bottom: 1px solid {{colors[weeks[0]][shade_10]}};">{{locale.upper(locale.WEEKDAY_ABBREVIATED_NAME[5][0:weekday_name_size])}}</td>
            <td style="line-height: {{WEEK_LINE_HEIGHT}}; font-size: {{DATE_FONT_SIZE}}; color: {{colors[weeks[0]][shade_11]}}; {% if date.month == sezimal_month_number and date.weekday == 11 %}background-color: {{ colors[weeks[0]][back_shade_11] }}; color: {{ colors[weeks[0]][text_shade_11] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %} border-bottom: 1px solid {{colors[weeks[0]][shade_11]}};">{{locale.upper(locale.WEEKDAY_ABBREVIATED_NAME[6][0:weekday_name_size])}}</td>
        {% else %}
            <td style="line-height: {{WEEK_LINE_HEIGHT}}; font-size: {{DATE_FONT_SIZE}}; color: {{colors[weeks[0]][shade_01]}}; {% if date.month == sezimal_month_number and date.weekday ==  1 %}background-color: {{ colors[weeks[0]][back_shade_01] }}; color: {{ colors[weeks[0]][text_shade_01] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %} border-bottom: 1px solid;">{{locale.upper(locale.WEEKDAY_SYMBOL[0])}}</td>
            <td style="line-height: {{WEEK_LINE_HEIGHT}}; font-size: {{DATE_FONT_SIZE}}; color: {{colors[weeks[0]][shade_02]}}; {% if date.month == sezimal_month_number and date.weekday ==  2 %}background-color: {{ colors[weeks[0]][back_shade_02] }}; color: {{ colors[weeks[0]][text_shade_02] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %} border-bottom: 1px solid;">{{locale.upper(locale.WEEKDAY_SYMBOL[1])}}</td>
            <td style="line-height: {{WEEK_LINE_HEIGHT}}; font-size: {{DATE_FONT_SIZE}}; color: {{colors[weeks[0]][shade_03]}}; {% if date.month == sezimal_month_number and date.weekday ==  3 %}background-color: {{ colors[weeks[0]][back_shade_03] }}; color: {{ colors[weeks[0]][text_shade_03] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %} border-bottom: 1px solid;">{{locale.upper(locale.WEEKDAY_SYMBOL[2])}}</td>
            <td style="line-height: {{WEEK_LINE_HEIGHT}}; font-size: {{DATE_FONT_SIZE}}; color: {{colors[weeks[0]][shade_04]}}; {% if date.month == sezimal_month_number and date.weekday ==  4 %}background-color: {{ colors[weeks[0]][back_shade_04] }}; color: {{ colors[weeks[0]][text_shade_04] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %} border-bottom: 1px solid;">{{locale.upper(locale.WEEKDAY_SYMBOL[3])}}</td>
            <td style="line-height: {{WEEK_LINE_HEIGHT}}; font-size: {{DATE_FONT_SIZE}}; color: {{colors[weeks[0]][shade_05]}}; {% if date.month == sezimal_month_number and date.weekday ==  5 %}background-color: {{ colors[weeks[0]][back_shade_05] }}; color: {{ colors[weeks[0]][text_shade_05] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %} border-bottom: 1px solid;">{{locale.upper(locale.WEEKDAY_SYMBOL[4])}}</td>
            <td style="line-height: {{WEEK_LINE_HEIGHT}}; font-size: {{DATE_FONT_SIZE}}; color: {{colors[weeks[0]][shade_10]}}; {% if date.month == sezimal_month_number and date.weekday == 10 %}background-color: {{ colors[weeks[0]][back_shade_10] }}; color: {{ colors[weeks[0]][text_shade_10] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %} border-{{ 'right' if locale.RTL else 'left' }}: 3px solid {{colors[weeks[0]][shade_10]}}; padding-{{ 'right' if locale.RTL else 'left' }}: 3px; border-bottom: 1px solid {{colors[weeks[0]][shade_10]}};">{{locale.upper(locale.WEEKDAY_SYMBOL[5])}}</td>
            <td style="line-height: {{WEEK_LINE_HEIGHT}}; font-size: {{DATE_FONT_SIZE}}; color: {{colors[weeks[0]][shade_11]}}; {% if date.month == sezimal_month_number and date.weekday == 11 %}background-color: {{ colors[weeks[0]][back_shade_11] }}; color: {{ colors[weeks[0]][text_shade_11] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %} border-bottom: 1px solid {{colors[weeks[0]][shade_11]}};">{{locale.upper(locale.WEEKDAY_SYMBOL[6])}}</td>
        {% endif %}
    </tr>
</table>
{% if month_view %}
</div>
{% endif %}
<table class="center" style="border-spacing: 0px;" id="month_table_{{sezimal_month_number}}">
    <colgroup>
    {% if not year_view %}
        <col span="1" width="6%">
    {% else %}
        <col span="1">
    {% endif %}
        <col span="1">
        <col span="1">
        <col span="1">
        <col span="1">
        <col span="1">
        <col span="1">
        <col span="1">
    </colgroup>
    {% for week_in_year in weeks %}
        {% set week_in_month = weeks.index(week_in_year) %}

        {% if (not week_view) or (date.week_in_year == week_in_year) %}
            <tr style="vertical-align: middle;">
                {% if (not year_view) %}
                    <td rowspan="4" style="color: {{colors[week_in_year][shade_week_number]}}; line-height: {{WEEK_FONT_SIZE}}; font-size: {{WEEK_FONT_SIZE}}; {% if date.week_in_year == week_in_year %}background-color: {{ colors[weeks[0]][back_shade_week_number] }}; color: {{ colors[weeks[0]][text_shade_week_number] }}; font-weight: bold;{% endif %} border-{{ 'left' if locale.RTL else 'right' }}: 1px solid {{colors[weeks[0]][shade_week_number]}};"><span style="display: block; margin-bottom: 0.3rem;">{{NUMBERS[week_in_year]}}<br/></span><span style="border-top: 2px solid {{ colors[weeks[0]][text_shade_week_number] }};">  {{NUMBERS[125 if month_dates[week_in_month][0].is_leap else 124]}}  </style></td>
                {% else %}
                    <td style="line-height: {{WEEK_LINE_HEIGHT}}; color: {{colors[week_in_year][shade_week_number]}}; font-size: {{WEEK_FONT_SIZE}}; {% if date.week_in_year == week_in_year %}background-color: {{ colors[weeks[0]][back_shade_week_number] }}; color: {{ colors[weeks[0]][text_shade_week_number] }}; font-weight: bold;{% endif %} border-{{ 'left' if locale.RTL else 'right' }}: 1px solid {{colors[weeks[0]][shade_week_number]}};">{{NUMBERS[week_in_year]}}</td>
                {% endif %}
                <td style="line-height: {{WEEK_LINE_HEIGHT}}; font-size: {{DATE_FONT_SIZE}}; color: {{colors[week_in_year][shade_01]}}; {% if month_view or week_view %}font-weight: bold;{% endif %} {% if date.month == sezimal_month_number and date.day == DAYS[week_in_month][ 0] %}background-color: {{ colors[weeks[0]][back_shade_01] }}; color: {{ colors[weeks[0]][text_shade_01] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %}" onclick="change_date('{{ sezimal_year_number }}-{{ str(sezimal_month_number).zfill(2) }}-{{ str(DAYS[week_in_month][0]).zfill(2) }}')">{{NUMBERS[ DAYS[week_in_month][0] ]}}</td>
                <td style="line-height: {{WEEK_LINE_HEIGHT}}; font-size: {{DATE_FONT_SIZE}}; color: {{colors[week_in_year][shade_02]}}; {% if month_view or week_view %}font-weight: bold;{% endif %} {% if date.month == sezimal_month_number and date.day == DAYS[week_in_month][ 1] %}background-color: {{ colors[weeks[0]][back_shade_02] }}; color: {{ colors[weeks[0]][text_shade_02] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %}" onclick="change_date('{{ sezimal_year_number }}-{{ str(sezimal_month_number).zfill(2) }}-{{ str(DAYS[week_in_month][1]).zfill(2) }}')">{{NUMBERS[ DAYS[week_in_month][1] ]}}</td>
                <td style="line-height: {{WEEK_LINE_HEIGHT}}; font-size: {{DATE_FONT_SIZE}}; color: {{colors[week_in_year][shade_03]}}; {% if month_view or week_view %}font-weight: bold;{% endif %} {% if date.month == sezimal_month_number and date.day == DAYS[week_in_month][ 2] %}background-color: {{ colors[weeks[0]][back_shade_03] }}; color: {{ colors[weeks[0]][text_shade_03] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %}" onclick="change_date('{{ sezimal_year_number }}-{{ str(sezimal_month_number).zfill(2) }}-{{ str(DAYS[week_in_month][2]).zfill(2) }}')">{{NUMBERS[ DAYS[week_in_month][2] ]}}</td>
                {% if (sezimal_month_number in (2, 5, 12, 15)) and (week_in_month == 2) %}
                    <td style="line-height: {{WEEK_LINE_HEIGHT}}; font-size: {{DATE_FONT_SIZE}}; color: {{colors[week_in_year][shade_04]}}; {% if month_view or week_view %}font-weight: bold;{% endif %} {% if date.month == sezimal_month_number and date.day == DAYS[week_in_month][ 3] %}background-color: {{ colors[weeks[0]][back_shade_04] }}; color: {{ colors[weeks[0]][text_shade_04] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %} border-left: 2px dotted {{colors[week_in_year][shade_04]}}; border-right: 2px dotted {{colors[week_in_year][shade_04]}};" onclick="change_date('{{ sezimal_year_number }}-{{ str(sezimal_month_number).zfill(2) }}-{{ str(DAYS[week_in_month][3]).zfill(2) }}')">{{NUMBERS[ DAYS[week_in_month][3] ]}}</td>
                {% else %}
                    <td style="line-height: {{WEEK_LINE_HEIGHT}}; font-size: {{DATE_FONT_SIZE}}; color: {{colors[week_in_year][shade_04]}}; {% if month_view or week_view %}font-weight: bold;{% endif %} {% if date.month == sezimal_month_number and date.day == DAYS[week_in_month][ 3] %}background-color: {{ colors[weeks[0]][back_shade_04] }}; color: {{ colors[weeks[0]][text_shade_04] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %}" onclick="change_date('{{ sezimal_year_number }}-{{ str(sezimal_month_number).zfill(2) }}-{{ str(DAYS[week_in_month][3]).zfill(2) }}')">{{NUMBERS[ DAYS[week_in_month][3] ]}}</td>
                {% endif %}
                <td style="line-height: {{WEEK_LINE_HEIGHT}}; font-size: {{DATE_FONT_SIZE}}; color: {{colors[week_in_year][shade_05]}}; {% if month_view or week_view %}font-weight: bold;{% endif %} {% if date.month == sezimal_month_number and date.day == DAYS[week_in_month][ 4] %}background-color: {{ colors[weeks[0]][back_shade_05] }}; color: {{ colors[weeks[0]][text_shade_05] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %}" onclick="change_date('{{ sezimal_year_number }}-{{ str(sezimal_month_number).zfill(2) }}-{{ str(DAYS[week_in_month][4]).zfill(2) }}')">{{NUMBERS[ DAYS[week_in_month][4] ]}}</td>
                <td style="line-height: {{WEEK_LINE_HEIGHT}}; font-size: {{DATE_FONT_SIZE}}; color: {{colors[week_in_year][shade_10]}}; {% if month_view or week_view %}font-weight: bold;{% endif %} {% if date.month == sezimal_month_number and date.day == DAYS[week_in_month][ 5] %}background-color: {{ colors[weeks[0]][back_shade_10] }}; color: {{ colors[weeks[0]][text_shade_10] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %} border-{{ 'right' if locale.RTL else 'left' }}: 3px solid {{colors[weeks[0]][shade_10]}}; padding-{{ 'right' if locale.RTL else 'left' }}: 3px;" onclick="change_date('{{ sezimal_year_number }}-{{ str(sezimal_month_number).zfill(2) }}-{{ str(DAYS[week_in_month][5]).zfill(2) }}')">{{NUMBERS[ DAYS[week_in_month][5] ]}}</td>
                <td style="line-height: {{WEEK_LINE_HEIGHT}}; font-size: {{DATE_FONT_SIZE}}; color: {{colors[week_in_year][shade_11]}}; {% if month_view or week_view %}font-weight: bold;{% endif %} {% if date.month == sezimal_month_number and date.day == DAYS[week_in_month][10] %}background-color: {{ colors[weeks[0]][back_shade_11] }}; color: {{ colors[weeks[0]][text_shade_11] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %}" onclick="change_date('{{ sezimal_year_number }}-{{ str(sezimal_month_number).zfill(2) }}-{{ str(DAYS[week_in_month][10]).zfill(2) }}')">{{NUMBERS[ DAYS[week_in_month][10] ]}}</td>
            </tr>
            {% if (not year_view) %}
                <tr style="vertical-align: middle;">
                    <td style="font-size: {{DAY_IN_YEAR_FONT_SIZE}}; line-height: {{DAY_IN_YEAR_FONT_SIZE}}; color: {{colors[week_in_year][shade_01]}}; {% if date.month == sezimal_month_number and date.day == DAYS[week_in_month][ 0] %}background-color: {{ colors[weeks[0]][back_shade_01] }}; color: {{ colors[weeks[0]][text_shade_01] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %}"><span style="font-size: {{DAY_IN_YEAR_FONT_SIZE}};">{{month_dates[week_in_month][0].format('#' + format_token + '-dY', locale)}} / {{NUMBERS[1415 if month_dates[week_in_month][0].is_leap else 1404]}}</span></td>
                    <td style="font-size: {{DAY_IN_YEAR_FONT_SIZE}}; line-height: {{DAY_IN_YEAR_FONT_SIZE}}; color: {{colors[week_in_year][shade_02]}}; {% if date.month == sezimal_month_number and date.day == DAYS[week_in_month][ 1] %}background-color: {{ colors[weeks[0]][back_shade_02] }}; color: {{ colors[weeks[0]][text_shade_02] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %}"><span style="font-size: {{DAY_IN_YEAR_FONT_SIZE}};">{{month_dates[week_in_month][1].format('#' + format_token + '-dY', locale)}} / {{NUMBERS[1415 if month_dates[week_in_month][1].is_leap else 1404]}}</span></td>
                    <td style="font-size: {{DAY_IN_YEAR_FONT_SIZE}}; line-height: {{DAY_IN_YEAR_FONT_SIZE}}; color: {{colors[week_in_year][shade_03]}}; {% if date.month == sezimal_month_number and date.day == DAYS[week_in_month][ 2] %}background-color: {{ colors[weeks[0]][back_shade_03] }}; color: {{ colors[weeks[0]][text_shade_03] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %}"><span style="font-size: {{DAY_IN_YEAR_FONT_SIZE}};">{{month_dates[week_in_month][2].format('#' + format_token + '-dY', locale)}} / {{NUMBERS[1415 if month_dates[week_in_month][2].is_leap else 1404]}}</span></td>
                    <td style="font-size: {{DAY_IN_YEAR_FONT_SIZE}}; line-height: {{DAY_IN_YEAR_FONT_SIZE}}; color: {{colors[week_in_year][shade_04]}}; {% if date.month == sezimal_month_number and date.day == DAYS[week_in_month][ 3] %}background-color: {{ colors[weeks[0]][back_shade_04] }}; color: {{ colors[weeks[0]][text_shade_04] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %}"><span style="font-size: {{DAY_IN_YEAR_FONT_SIZE}};">{{month_dates[week_in_month][3].format('#' + format_token + '-dY', locale)}} / {{NUMBERS[1415 if month_dates[week_in_month][3].is_leap else 1404]}}</span></td>
                    <td style="font-size: {{DAY_IN_YEAR_FONT_SIZE}}; line-height: {{DAY_IN_YEAR_FONT_SIZE}}; color: {{colors[week_in_year][shade_05]}}; {% if date.month == sezimal_month_number and date.day == DAYS[week_in_month][ 4] %}background-color: {{ colors[weeks[0]][back_shade_05] }}; color: {{ colors[weeks[0]][text_shade_05] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %}"><span style="font-size: {{DAY_IN_YEAR_FONT_SIZE}};">{{month_dates[week_in_month][4].format('#' + format_token + '-dY', locale)}} / {{NUMBERS[1415 if month_dates[week_in_month][4].is_leap else 1404]}}</span></td>
                    <td style="font-size: {{DAY_IN_YEAR_FONT_SIZE}}; line-height: {{DAY_IN_YEAR_FONT_SIZE}}; color: {{colors[week_in_year][shade_10]}}; {% if date.month == sezimal_month_number and date.day == DAYS[week_in_month][ 5] %}background-color: {{ colors[weeks[0]][back_shade_10] }}; color: {{ colors[weeks[0]][text_shade_10] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %} border-{{ 'right' if locale.RTL else 'left' }}: 3px solid {{colors[weeks[0]][shade_10]}}; padding-{{ 'right' if locale.RTL else 'left' }}: 3px;"><span style="font-size: {{DAY_IN_YEAR_FONT_SIZE}};">{{month_dates[week_in_month][5].format('#' + format_token + '-dY', locale)}} / {{NUMBERS[1415 if month_dates[week_in_month][5].is_leap else 1404]}}</span></td>
                    <td style="font-size: {{DAY_IN_YEAR_FONT_SIZE}}; line-height: {{DAY_IN_YEAR_FONT_SIZE}}; color: {{colors[week_in_year][shade_11]}}; {% if date.month == sezimal_month_number and date.day == DAYS[week_in_month][10] %}background-color: {{ colors[weeks[0]][back_shade_11] }}; color: {{ colors[weeks[0]][text_shade_11] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %}"><span style="font-size: {{DAY_IN_YEAR_FONT_SIZE}};">{{month_dates[week_in_month][10].format('#' + format_token + '-dY', locale)}} / {{NUMBERS[1415 if month_dates[week_in_month][10].is_leap else 1404]}}
                </tr>
                <tr style="vertical-align: middle;">
                    <td style="font-size: {{WEEK_FONT_SIZE}}; line-height: {{WEEK_FONT_SIZE}}; color: {{colors[week_in_year][shade_01]}}; {% if date.month == sezimal_month_number and date.day == DAYS[week_in_month][ 0] %}background-color: {{ colors[weeks[0]][back_shade_01] }}; color: {{ colors[weeks[0]][text_shade_01] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %}"><span style="font-size: {{WEEK_FONT_SIZE}};">{{month_dates[week_in_month][0].format(locale.ISO_MONTH_DAY_FORMAT, locale)}}</span></td>
                    <td style="font-size: {{WEEK_FONT_SIZE}}; line-height: {{WEEK_FONT_SIZE}}; color: {{colors[week_in_year][shade_02]}}; {% if date.month == sezimal_month_number and date.day == DAYS[week_in_month][ 1] %}background-color: {{ colors[weeks[0]][back_shade_02] }}; color: {{ colors[weeks[0]][text_shade_02] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %}"><span style="font-size: {{WEEK_FONT_SIZE}};">{{month_dates[week_in_month][1].format(locale.ISO_MONTH_DAY_FORMAT, locale)}}</span></td>
                    <td style="font-size: {{WEEK_FONT_SIZE}}; line-height: {{WEEK_FONT_SIZE}}; color: {{colors[week_in_year][shade_03]}}; {% if date.month == sezimal_month_number and date.day == DAYS[week_in_month][ 2] %}background-color: {{ colors[weeks[0]][back_shade_03] }}; color: {{ colors[weeks[0]][text_shade_03] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %}"><span style="font-size: {{WEEK_FONT_SIZE}};">{{month_dates[week_in_month][2].format(locale.ISO_MONTH_DAY_FORMAT, locale)}}</span></td>
                    <td style="font-size: {{WEEK_FONT_SIZE}}; line-height: {{WEEK_FONT_SIZE}}; color: {{colors[week_in_year][shade_04]}}; {% if date.month == sezimal_month_number and date.day == DAYS[week_in_month][ 3] %}background-color: {{ colors[weeks[0]][back_shade_04] }}; color: {{ colors[weeks[0]][text_shade_04] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %}"><span style="font-size: {{WEEK_FONT_SIZE}};">{{month_dates[week_in_month][3].format(locale.ISO_MONTH_DAY_FORMAT, locale)}}</span></td>
                    <td style="font-size: {{WEEK_FONT_SIZE}}; line-height: {{WEEK_FONT_SIZE}}; color: {{colors[week_in_year][shade_05]}}; {% if date.month == sezimal_month_number and date.day == DAYS[week_in_month][ 4] %}background-color: {{ colors[weeks[0]][back_shade_05] }}; color: {{ colors[weeks[0]][text_shade_05] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %}"><span style="font-size: {{WEEK_FONT_SIZE}};">{{month_dates[week_in_month][4].format(locale.ISO_MONTH_DAY_FORMAT, locale)}}</span></td>
                    <td style="font-size: {{WEEK_FONT_SIZE}}; line-height: {{WEEK_FONT_SIZE}}; color: {{colors[week_in_year][shade_10]}}; {% if date.month == sezimal_month_number and date.day == DAYS[week_in_month][ 5] %}background-color: {{ colors[weeks[0]][back_shade_10] }}; color: {{ colors[weeks[0]][text_shade_10] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %} border-{{ 'right' if locale.RTL else 'left' }}: 3px solid {{colors[weeks[0]][shade_10]}}; padding-{{ 'right' if locale.RTL else 'left' }}: 3px;"><span style="font-size: {{WEEK_FONT_SIZE}};">{{month_dates[week_in_month][5].format(locale.ISO_MONTH_DAY_FORMAT, locale)}}</span></td>
                    <td style="font-size: {{WEEK_FONT_SIZE}}; line-height: {{WEEK_FONT_SIZE}}; color: {{colors[week_in_year][shade_11]}}; {% if date.month == sezimal_month_number and date.day == DAYS[week_in_month][10] %}background-color: {{ colors[weeks[0]][back_shade_11] }}; color: {{ colors[weeks[0]][text_shade_11] }}; font-weight: bold; font-size: {{TODAY_FONT_SIZE}};{% endif %}"><span style="font-size: {{WEEK_FONT_SIZE}};">{{month_dates[week_in_month][10].format(locale.ISO_MONTH_DAY_FORMAT, locale)}}</span></td>
                </tr>
                <tr style="vertical-align: middle;">
                    <td class="emoji" style="font-size: {{WEEK_FONT_SIZE}}; line-height: {{EMOJI_FONT_SIZE}}; color: {{colors[week_in_year][shade_01]}}; {% if date.month == sezimal_month_number and date.day == DAYS[week_in_month][ 0] %}background-color: {{ colors[weeks[0]][back_shade_01] }}; color: {{ colors[weeks[0]][text_shade_01] }}; font-weight: bold;{% endif %}">
                        <span style="font-size: {{WEEK_FONT_SIZE}};">
                            {% if SezimalInteger(sezimal_month_number) in events %}
                                {% if SezimalInteger(DAYS[week_in_month][0]) in events[sezimal_month_number] %}
                                    {% for event in events[SezimalInteger(sezimal_month_number)][SezimalInteger(DAYS[week_in_month][0])] %}
{{ event.emoji }}
                                    {% endfor %}
                                {% endif %}
                            {% endif %}
{{month_dates[week_in_month][0].format('#@' + tz_locale.DEFAULT_HEMISPHERE + 'S', locale)}}
{{month_dates[week_in_month][0].format('#@' + tz_locale.DEFAULT_HEMISPHERE + 'L', locale)}}
                        </span>
                    </td>
                    <td class="emoji" style="font-size: {{WEEK_FONT_SIZE}}; line-height: {{EMOJI_FONT_SIZE}}; color: {{colors[week_in_year][shade_02]}}; {% if date.month == sezimal_month_number and date.day == DAYS[week_in_month][ 1] %}background-color: {{ colors[weeks[0]][back_shade_02] }}; color: {{ colors[weeks[0]][text_shade_02] }}; font-weight: bold;{% endif %}">
                        <span style="font-size: {{WEEK_FONT_SIZE}};">
                            {% if SezimalInteger(sezimal_month_number) in events %}
                                {% if SezimalInteger(DAYS[week_in_month][1]) in events[sezimal_month_number] %}
                                    {% for event in events[SezimalInteger(sezimal_month_number)][SezimalInteger(DAYS[week_in_month][1])] %}
{{ event.emoji }}
                                    {% endfor %}
                                {% endif %}
                            {% endif %}
{{month_dates[week_in_month][1].format('#@' + tz_locale.DEFAULT_HEMISPHERE + 'S', locale)}}
{{month_dates[week_in_month][1].format('#@' + tz_locale.DEFAULT_HEMISPHERE + 'L', locale)}}
                        </span>
                    </td>
                    <td class="emoji" style="font-size: {{WEEK_FONT_SIZE}}; line-height: {{EMOJI_FONT_SIZE}}; color: {{colors[week_in_year][shade_03]}}; {% if date.month == sezimal_month_number and date.day == DAYS[week_in_month][ 2] %}background-color: {{ colors[weeks[0]][back_shade_03] }}; color: {{ colors[weeks[0]][text_shade_03] }}; font-weight: bold;{% endif %}">
                        <span style="font-size: {{WEEK_FONT_SIZE}};">
                            {% if SezimalInteger(sezimal_month_number) in events %}
                                {% if SezimalInteger(DAYS[week_in_month][2]) in events[sezimal_month_number] %}
                                    {% for event in events[SezimalInteger(sezimal_month_number)][SezimalInteger(DAYS[week_in_month][2])] %}
{{ event.emoji }}
                                    {% endfor %}
                                {% endif %}
                            {% endif %}
{{month_dates[week_in_month][2].format('#@' + tz_locale.DEFAULT_HEMISPHERE + 'S', locale)}}
{{month_dates[week_in_month][2].format('#@' + tz_locale.DEFAULT_HEMISPHERE + 'L', locale)}}
                        </span>
                    </td>
                    <td class="emoji" style="font-size: {{WEEK_FONT_SIZE}}; line-height: {{EMOJI_FONT_SIZE}}; color: {{colors[week_in_year][shade_04]}}; {% if date.month == sezimal_month_number and date.day == DAYS[week_in_month][ 3] %}background-color: {{ colors[weeks[0]][back_shade_04] }}; color: {{ colors[weeks[0]][text_shade_04] }}; font-weight: bold;{% endif %}">
                        <span style="font-size: {{WEEK_FONT_SIZE}};">
                            {% if SezimalInteger(sezimal_month_number) in events %}
                                {% if SezimalInteger(DAYS[week_in_month][3]) in events[sezimal_month_number] %}
                                    {% for event in events[SezimalInteger(sezimal_month_number)][SezimalInteger(DAYS[week_in_month][3])] %}
{{ event.emoji }}
                                    {% endfor %}
                                {% endif %}
                            {% endif %}
{{month_dates[week_in_month][3].format('#@' + tz_locale.DEFAULT_HEMISPHERE + 'S', locale)}}
{{month_dates[week_in_month][3].format('#@' + tz_locale.DEFAULT_HEMISPHERE + 'L', locale)}}
                        </span>
                    </td>
                    <td class="emoji" style="font-size: {{WEEK_FONT_SIZE}}; line-height: {{EMOJI_FONT_SIZE}}; color: {{colors[week_in_year][shade_05]}}; {% if date.month == sezimal_month_number and date.day == DAYS[week_in_month][ 4] %}background-color: {{ colors[weeks[0]][back_shade_05] }}; color: {{ colors[weeks[0]][text_shade_05] }}; font-weight: bold;{% endif %}">
                        <span style="font-size: {{WEEK_FONT_SIZE}};">
                            {% if SezimalInteger(sezimal_month_number) in events %}
                                {% if SezimalInteger(DAYS[week_in_month][4]) in events[sezimal_month_number] %}
                                    {% for event in events[SezimalInteger(sezimal_month_number)][SezimalInteger(DAYS[week_in_month][4])] %}
{{ event.emoji }}
                                    {% endfor %}
                                {% endif %}
                            {% endif %}
{{month_dates[week_in_month][4].format('#@' + tz_locale.DEFAULT_HEMISPHERE + 'S', locale)}}
{{month_dates[week_in_month][4].format('#@' + tz_locale.DEFAULT_HEMISPHERE + 'L', locale)}}
                        </span>
                    </td>
                    <td class="emoji" style="font-size: {{WEEK_FONT_SIZE}}; line-height: {{EMOJI_FONT_SIZE}}; color: {{colors[week_in_year][shade_10]}}; {% if date.month == sezimal_month_number and date.day == DAYS[week_in_month][ 5] %}background-color: {{ colors[weeks[0]][back_shade_10] }}; color: {{ colors[weeks[0]][text_shade_10] }}; font-weight: bold;{% endif %} border-{{ 'right' if locale.RTL else 'left' }}: 3px solid {{colors[weeks[0]][shade_10]}}; padding-{{ 'right' if locale.RTL else 'left' }}: 3px;">
                        <span style="font-size: {{WEEK_FONT_SIZE}};">
                            {% if SezimalInteger(sezimal_month_number) in events %}
                                {% if SezimalInteger(DAYS[week_in_month][5]) in events[sezimal_month_number] %}
                                    {% for event in events[SezimalInteger(sezimal_month_number)][SezimalInteger(DAYS[week_in_month][5])] %}
{{ event.emoji }}
                                    {% endfor %}
                                {% endif %}
                            {% endif %}
{{month_dates[week_in_month][5].format('#@' + tz_locale.DEFAULT_HEMISPHERE + 'S', locale)}}
{{month_dates[week_in_month][5].format('#@' + tz_locale.DEFAULT_HEMISPHERE + 'L', locale)}}
                        </span>
                    </td>
                    <td class="emoji" style="font-size: {{WEEK_FONT_SIZE}}; line-height: {{EMOJI_FONT_SIZE}}; color: {{colors[week_in_year][shade_11]}}; {% if date.month == sezimal_month_number and date.day == DAYS[week_in_month][10] %}background-color: {{ colors[weeks[0]][back_shade_11] }}; color: {{ colors[weeks[0]][text_shade_11] }}; font-weight: bold;{% endif %}">
                        <span style="font-size: {{WEEK_FONT_SIZE}};">
                            {% if SezimalInteger(sezimal_month_number) in events %}
                                {% if SezimalInteger(DAYS[week_in_month][10]) in events[sezimal_month_number] %}
                                    {% for event in events[SezimalInteger(sezimal_month_number)][SezimalInteger(DAYS[week_in_month][10])] %}
{{ event.emoji }}
                                    {% endfor %}
                                {% endif %}
                            {% endif %}
{{month_dates[week_in_month][10].format('#@' + tz_locale.DEFAULT_HEMISPHERE + 'S', locale)}}
{{month_dates[week_in_month][10].format('#@' + tz_locale.DEFAULT_HEMISPHERE + 'L', locale)}}
                        </span>
                    </td>
                </tr>
            {% endif %}
        {% endif %}
    {% endfor %}
    {% if (not month_view) and (not week_view) %}
        {% if len(weeks) == 4 %}
            <tr style="vertical-align: middle;">
                <td colspan="8"> </td>
            </tr>
        {% endif %}
        <tr style="vertical-align: middle; font-size: {{EVENTS_FONT_SIZE}}; line-height: {{EMOJI_FONT_SIZE}};">
            <td colspan="8" style="color: {{colors[weeks[2]][shade_04]}}">
            &nbsp;
            {% if SezimalInteger(sezimal_month_number) in events %}
                {% for event_day in sorted(events[sezimal_month_number].keys()) %}
                    {% for event in events[SezimalInteger(sezimal_month_number)][event_day] %}
                        {{ event.date.format('#' + format_token + '-d - ', locale) }} <span class="emoji">{{ event.emoji }}</span>
                    {% endfor %}
                {% endfor %}
            {% endif %}
            {% if sezimal_month_number == 3 %}
                <span style="color: {{colors[weeks[2]][shade_march]}};">{{ colors['march'].format('#' + format_token + '-d - #@' + tz_locale.DEFAULT_HEMISPHERE + 'S', locale) }}
            {% elif sezimal_month_number == 10 %}
                <span style="color: {{colors[weeks[2]][shade_june]}};">{{ colors['june'].format('#' + format_token + '-d - #@' + tz_locale.DEFAULT_HEMISPHERE + 'S', locale) }}
            {% elif sezimal_month_number == 13 %}
                <span style="color: {{colors[weeks[2]][shade_september]}};">{{ colors['september'].format('#' + format_token + '-d - #@' + tz_locale.DEFAULT_HEMISPHERE + 'S', locale) }}
            {% elif sezimal_month_number == 20 %}
                <span style="color: {{colors[weeks[2]][shade_december]}};">{{ colors['december'].format('#' + format_token + '-d - #@' + tz_locale.DEFAULT_HEMISPHERE + 'S', locale) }}
            {% endif %}
            &nbsp;
            </td>
        </tr>
{#        <tr style="vertical-align: middle; font-size: {{EVENTS_FONT_SIZE}}; line-height: {{EMOJI_FONT_SIZE}};">
            <td colspan="8">
            {% if sezimal_month_number == 1 %}
                <span style="color: {{colors[weeks[2]][shade_december]}};">{{ colors['december'].format('#@~' + tz_locale.DEFAULT_HEMISPHERE + 'S #~' + tz_locale.DEFAULT_HEMISPHERE + 'S', locale) | safe }}
            {% elif sezimal_month_number == 2 %}
                <span style="color: {{colors[weeks[2]][shade_february]}};">{{ colors['february'].format('#@' + tz_locale.DEFAULT_HEMISPHERE + 'S', locale) }}
            {% elif sezimal_month_number == 3 %}
                <span style="color: {{colors[weeks[2]][shade_march]}};">{{ colors['march'].format('#' + format_token + '-d - #@' + tz_locale.DEFAULT_HEMISPHERE + 'S #' + tz_locale.DEFAULT_HEMISPHERE + 'S', locale) }}
            {% elif sezimal_month_number == 4 %}
                <span style="color: {{colors[weeks[2]][shade_march]}};">{{ colors['march'].format('#@~' + tz_locale.DEFAULT_HEMISPHERE + 'S #~' + tz_locale.DEFAULT_HEMISPHERE + 'S', locale) }}
            {% elif sezimal_month_number == 5 %}
                <span style="color: {{colors[weeks[2]][shade_may]}};">{{ colors['may'].format('#@' + tz_locale.DEFAULT_HEMISPHERE + 'S', locale) }}
            {% elif sezimal_month_number == 10 %}
                <span style="color: {{colors[weeks[2]][shade_june]}};">{{ colors['june'].format('#' + format_token + '-d - #@' + tz_locale.DEFAULT_HEMISPHERE + 'S #' + tz_locale.DEFAULT_HEMISPHERE + 'S', locale) }}
            {% elif sezimal_month_number == 11 %}
                <span style="color: {{colors[weeks[2]][shade_june]}};">{{ colors['june'].format('#@~' + tz_locale.DEFAULT_HEMISPHERE + 'S #~' + tz_locale.DEFAULT_HEMISPHERE + 'S', locale) }}
            {% elif sezimal_month_number == 12 %}
                <span style="color: {{colors[weeks[2]][shade_august]}};">{{ colors['august'].format('#@' + tz_locale.DEFAULT_HEMISPHERE + 'S', locale) }}
            {% elif sezimal_month_number == 13 %}
                <span style="color: {{colors[weeks[2]][shade_september]}};">{{ colors['september'].format('#' + format_token + '-d - #@' + tz_locale.DEFAULT_HEMISPHERE + 'S #' + tz_locale.DEFAULT_HEMISPHERE + 'S', locale) }}
            {% elif sezimal_month_number == 14 %}
                <span style="color: {{colors[weeks[2]][shade_september]}};">{{ colors['september'].format('#@~' + tz_locale.DEFAULT_HEMISPHERE + 'S #~' + tz_locale.DEFAULT_HEMISPHERE + 'S', locale) }}
            {% elif sezimal_month_number == 15 %}
                <span style="color: {{colors[weeks[2]][shade_november]}};">{{ colors['november'].format('#@' + tz_locale.DEFAULT_HEMISPHERE + 'S', locale) }}
            {% elif sezimal_month_number == 20 %}
                <span style="color: {{colors[weeks[2]][shade_december]}};">{{ colors['december'].format('#' + format_token + '-d - #@' + tz_locale.DEFAULT_HEMISPHERE + 'S #' + tz_locale.DEFAULT_HEMISPHERE + 'S', locale) }}
            {% endif %}
                </span>
            </td>
        </tr> #}
        <tr style="vertical-align: middle; font-size: {{EVENTS_FONT_SIZE}}; line-height: {{EMOJI_FONT_SIZE}};">
            <td colspan="8" style="font-size: {{WEEK_FONT_SIZE}}; line-height: {{EMOJI_FONT_SIZE}}; color: {{colors[weeks[2]][shade_04]}}">
            {% for moon_date in colors[moon_month] %}
                {{ moon_date.format('#' + format_token + '-d', locale) }} -  <span class="emoji">{{ moon_date.format('#@~' + tz_locale.DEFAULT_HEMISPHERE + '4L', locale) }}</span>
            {% endfor %}
            </td>
        </tr>
        <tr style="vertical-align: middle;">
            <td colspan="8" style="font-size: {{WEEK_FONT_SIZE}}; line-height: {{WEEK_FONT_SIZE}};"> </td>
        </tr>
    {% endif %}
</table>
