{% if not dark_mode %}
    {% include 'calendar_light_mode.html' %}
{% endif %}

{% set WEEKS = SezimalDictionary({0: '0', 1: '1', 2: '2', 3: '3', 4: '4', 5: '5', 10: '10', 11: '11', 12: '12', 13: '13', 14: '14', 15: '15', 20: '20', 21: '21', 22: '22', 23: '23', 24: '24', 25: '25', 30: '30', 31: '31', 32: '32', 33: '33', 34: '34', 35: '35', 40: '40', 41: '41', 42: '42', 43: '43', 44: '44', 45: '45', 50: '50', 51: '51', 52: '52', 53: '53', 54: '54', 55: '55', 100: '100', 101: '101', 102: '102', 103: '103', 104: '104', 105: '105', 110: '110', 111: '111', 112: '112', 113: '113', 114: '114', 115: '115', 120: '120', 121: '121', 122: '122', 123: '123', 124: '124', 125: '125'}) %}

{% if base == 14 %}
    {% set NUMBERS = SezimalDictionary({0: '0', 1: '1', 2: '2', 3: '3', 4: '4', 5: '5', 10: '6', 11: '7', 12: '8', 13: '9', 14: '10', 15: '11', 20: '12', 21: '13', 22: '14', 23: '15', 24: '16', 25: '17', 30: '18', 31: '19', 32: '20', 33: '21', 34: '22', 35: '23', 40: '24', 41: '25', 42: '26', 43: '27', 44: '28', 45: '29', 50: '30', 51: '31', 52: '32', 53: '33', 54: '34', 55: '35', 100: '36', 101: '37', 102: '38', 103: '39', 104: '40', 105: '41', 110: '42', 111: '43', 112: '44', 113: '45', 114: '46', 115: '47', 120: '48', 121: '49', 122: '50', 123: '51', 124: '52', 125: '53', 1404: '364', 1415: '371'}) %}

    {% set UTAS = SezimalDictionary({0: '00', 1: '01', 2: '02', 3: '03', 4: '04', 5: '05', 10: '06', 11: '07', 12: '08', 13: '09', 14: '10', 15: '11', 20: '12', 21: '13', 22: '14', 23: '15', 24: '16', 25: '17', 30: '18', 31: '19', 32: '20', 33: '21', 34: '22', 35: '23'}) %}
    {% set HOURS_24 = SezimalDictionary({0: '00', 1: '01', 2: '02', 3: '03', 4: '04', 5: '05', 10: '06', 11: '07', 12: '08', 13: '09', 14: '10', 15: '11', 20: '12', 21: '13', 22: '14', 23: '15', 24: '16', 25: '17', 30: '18', 31: '19', 32: '20', 33: '21', 34: '22', 35: '23'}) %}
    {% set HALF = '30' %}
    {% set SEPARATOR = locale.TIME_SEPARATOR %}
    {% set MIDDAY = 20 %}

    {% if locale.HOUR_FORMAT == '12h' %}
        {% set UTAS = SezimalDictionary({0: '0', 1: '1', 2: '2', 3: '3', 4: '4', 5: '5', 10: '6', 11: '7', 12: '8', 13: '9', 14: '10', 15: '11', 20: '12', 21: '1', 22: '2', 23: '3', 24: '4', 25: '5', 30: '6', 31: '7', 32: '8', 33: '9', 34: '10', 35: '11'}) %}
    {% endif %}
{% elif base == 20 %}
    {% set NUMBERS = SezimalDictionary({0: '0', 1: '1', 2: '2', 3: '3', 4: '4', 5: '5', 10: '6', 11: '7', 12: '8', 13: '9', 14: '‚Üä', 15: '‚Üã', 20: '10', 21: '11', 22: '12', 23: '13', 24: '14', 25: '15', 30: '16', 31: '17', 32: '18', 33: '19', 34: '1‚Üä', 35: '1‚Üã', 40: '20', 41: '21', 42: '22', 43: '23', 44: '24', 45: '25', 50: '26', 51: '27', 52: '28', 53: '29', 54: '2‚Üä', 55: '2‚Üã', 100: '30', 101: '31', 102: '32', 103: '33', 104: '34', 105: '35', 110: '36', 111: '37', 112: '38', 113: '39', 114: '3‚Üä', 115: '3‚Üã', 120: '40', 121: '41', 122: '42', 123: '43', 124: '44', 125: '45', 1404: '264', 1415: '26‚Üã'}) %}

    {% set UTAS = SezimalDictionary({0: '00', 1: '03', 2: '06', 3: '09', 4: '10', 5: '13', 10: '16', 11: '19', 12: '20', 13: '23', 14: '26', 15: '29', 20: '30', 21: '33', 22: '36', 23: '39', 24: '40', 25: '43', 30: '46', 31: '49', 32: '50', 33: '53', 34: '56', 35: '59', 40: '60', 41: '63', 42: '66', 43: '69', 44: '70', 45: '73', 50: '76', 51: '79', 52: '80', 53: '83', 54: '86', 55: '89', 100: '90', 101: '93', 102: '96', 103: '99', 104: '‚Üä0', 105: '‚Üä3', 110: '‚Üä6', 111: '‚Üä9', 112: '‚Üã0', 113: '‚Üã3', 114: '‚Üã6', 115: '‚Üã9'}) %}
    {% set HOURS_24 = SezimalDictionary({0: '00', 1: '03', 2: '06', 3: '09', 4: '10', 5: '13', 10: '16', 11: '19', 12: '20', 13: '23', 14: '26', 15: '29', 20: '30', 21: '33', 22: '36', 23: '39', 24: '40', 25: '43', 30: '46', 31: '49', 32: '50', 33: '53', 34: '56', 35: '59', 40: '60', 41: '63', 42: '66', 43: '69', 44: '70', 45: '73', 50: '76', 51: '79', 52: '80', 53: '83', 54: '86', 55: '89', 100: '90', 101: '93', 102: '96', 103: '99', 104: '‚Üä0', 105: '‚Üä3', 110: '‚Üä6', 111: '‚Üä9', 112: '‚Üã0', 113: '‚Üã3', 114: '‚Üã6', 115: '‚Üã9'}) %}
    {% set HALF = '6' %}
    {% set SEPARATOR = '' %}
    {% set MIDDAY = 40 %}
{% elif base == 100 %}
    {% set NUMBERS = SezimalDictionary({0: '0', 1: '1', 2: '2', 3: '3', 4: '4', 5: '5', 10: '0Ãá', 11: '1Ãá', 12: '2Ãá', 13: '3Ãá', 14: '4Ãá', 15: '5Ãá', 20: '0Ãà', 21: '1Ãà', 22: '2Ãà', 23: '3Ãà', 24: '4Ãà', 25: '5Ãà', 30: '0Ãä', 31: '1Ãä', 32: '2Ãä', 33: '3Ãä', 34: '4Ãä', 35: '5Ãä', 40: '0ÃÑ', 41: '1ÃÑ', 42: '2ÃÑ', 43: '3ÃÑ', 44: '4ÃÑ', 45: '5ÃÑ', 50: '0ÃÜ', 51: '1ÃÜ', 52: '2ÃÜ', 53: '3ÃÜ', 54: '4ÃÜ', 55: '5ÃÜ', 100: '10', 101: '11', 102: '12', 103: '13', 104: '14', 105: '15', 110: '10Ãá', 111: '11Ãá', 112: '12Ãá', 113: '13Ãá', 114: '14Ãá', 115: '15Ãá', 120: '10Ãà', 121: '11Ãà', 122: '12Ãà', 123: '13Ãà', 124: '14Ãà', 125: '15Ãà', 1404: '4Ãá4', 1415: '4Ãá5Ãá'}) %}
    {% set UTAS = SezimalDictionary({0: '0', 1: '1', 2: '2', 3: '3', 4: '4', 5: '5', 10: '0Ãá', 11: '1Ãá', 12: '2Ãá', 13: '3Ãá', 14: '4Ãá', 15: '5Ãá', 20: '0Ãà', 21: '1Ãà', 22: '2Ãà', 23: '3Ãà', 24: '4Ãà', 25: '5Ãà', 30: '0Ãä', 31: '1Ãä', 32: '2Ãä', 33: '3Ãä', 34: '4Ãä', 35: '5Ãä', 40: '0ÃÑ', 41: '1ÃÑ', 42: '2ÃÑ', 43: '3ÃÑ', 44: '4ÃÑ', 45: '5ÃÑ', 50: '0ÃÜ', 51: '1ÃÜ', 52: '2ÃÜ', 53: '3ÃÜ', 54: '4ÃÜ', 55: '5ÃÜ'}) %}
    {% set HOURS_24 = SezimalDictionary({0: '00', 1: '01', 2: '02', 3: '03', 4: '04', 5: '05', 10: '10', 11: '11', 12: '12', 13: '13', 14: '14', 15: '15', 20: '20', 21: '21', 22: '22', 23: '23', 24: '24', 25: '25', 30: '30', 31: '31', 32: '32', 33: '33', 34: '34', 35: '35', 40: '40', 41: '41', 42: '42', 43: '43', 44: '44', 45: '45', 50: '50', 51: '51', 52: '52', 53: '53', 54: '54', 55: '55'}) %}
    {% set HALF = '0Ãä' %}
    {% set SEPARATOR = locale.TIME_SEPARATOR %}
    {% set MIDDAY = 30 %}

    {% if sezimal_digits or format_token == '@!' %}
        {% set NUMBERS = SezimalDictionary({0: 'Û±∏Ä', 1: 'Û±∏Å', 2: 'Û±∏Ç', 3: 'Û±∏É', 4: 'Û±∏Ñ', 5: 'Û±∏Ö', 10: 'Û±∏Ü', 11: 'Û±∏á', 12: 'Û±∏à', 13: 'Û±∏â', 14: 'Û±∏ä', 15: 'Û±∏ã', 20: 'Û±∏å', 21: 'Û±∏ç', 22: 'Û±∏é', 23: 'Û±∏è', 24: 'Û±∏ê', 25: 'Û±∏ë', 30: 'Û±∏í', 31: 'Û±∏ì', 32: 'Û±∏î', 33: 'Û±∏ï', 34: 'Û±∏ñ', 35: 'Û±∏ó', 40: 'Û±∏ò', 41: 'Û±∏ô', 42: 'Û±∏ö', 43: 'Û±∏õ', 44: 'Û±∏ú', 45: 'Û±∏ù', 50: 'Û±∏û', 51: 'Û±∏ü', 52: 'Û±∏†', 53: 'Û±∏°', 54: 'Û±∏¢', 55: 'Û±∏£', 100: 'Û±∏ÅÛ±∏Ä', 101: 'Û±∏ÅÛ±∏Å', 102: 'Û±∏ÅÛ±∏Ç', 103: 'Û±∏ÅÛ±∏É', 104: 'Û±∏ÅÛ±∏Ñ', 105: 'Û±∏ÅÛ±∏Ö', 110: 'Û±∏ÅÛ±∏Ü', 111: 'Û±∏ÅÛ±∏á', 112: 'Û±∏ÅÛ±∏à', 113: 'Û±∏ÅÛ±∏â', 114: 'Û±∏ÅÛ±∏ä', 115: 'Û±∏ÅÛ±∏ã', 120: 'Û±∏ÅÛ±∏å', 121: 'Û±∏ÅÛ±∏ç', 122: 'Û±∏ÅÛ±∏é', 123: 'Û±∏ÅÛ±∏è', 124: 'Û±∏ÅÛ±∏ê', 125: 'Û±∏ÅÛ±∏ë', 1404: 'Û±∏äÛ±∏Ñ', 1415: 'Û±∏äÛ±∏ã'}) %}
        {% set UTAS = SezimalDictionary({0: 'Û±∏Ä', 1: 'Û±∏Å', 2: 'Û±∏Ç', 3: 'Û±∏É', 4: 'Û±∏Ñ', 5: 'Û±∏Ö', 10: 'Û±∏Ü', 11: 'Û±∏á', 12: 'Û±∏à', 13: 'Û±∏â', 14: 'Û±∏ä', 15: 'Û±∏ã', 20: 'Û±∏å', 21: 'Û±∏ç', 22: 'Û±∏é', 23: 'Û±∏è', 24: 'Û±∏ê', 25: 'Û±∏ë', 30: 'Û±∏í', 31: 'Û±∏ì', 32: 'Û±∏î', 33: 'Û±∏ï', 34: 'Û±∏ñ', 35: 'Û±∏ó', 40: 'Û±∏ò', 41: 'Û±∏ô', 42: 'Û±∏ö', 43: 'Û±∏õ', 44: 'Û±∏ú', 45: 'Û±∏ù', 50: 'Û±∏û', 51: 'Û±∏ü', 52: 'Û±∏†', 53: 'Û±∏°', 54: 'Û±∏¢', 55: 'Û±∏£'}) %}
        {% set HALF = 'Û±∏í' %}
        {% set SEPARATOR = 'Û±π∑' %}
    {% elif format_token == 'Z' %}
        {% set NUMBERS = SezimalDictionary({0: '0', 1: '1', 2: '2', 3: '3', 4: '4', 5: '5', 10: '6', 11: '7', 12: '8', 13: '9', 14: 'A', 15: 'B', 20: 'C', 21: 'D', 22: 'E', 23: 'F', 24: 'G', 25: 'H', 30: 'I', 31: 'J', 32: 'K', 33: 'L', 34: 'M', 35: 'N', 40: 'O', 41: 'P', 42: 'Q', 43: 'R', 44: 'S', 45: 'T', 50: 'U', 51: 'V', 52: 'W', 53: 'X', 54: 'Y', 55: 'Z', 100: '10', 101: '11', 102: '12', 103: '13', 104: '14', 105: '15', 110: '16', 111: '17', 112: '18', 113: '19', 114: '1A', 115: '1B', 120: '1C', 121: '1D', 122: '1E', 123: '1F', 124: '1G', 125: '1H', 1404: 'A4', 1415: 'AB'}) %}
        {% set UTAS = SezimalDictionary({0: '0', 1: '1', 2: '2', 3: '3', 4: '4', 5: '5', 10: '6', 11: '7', 12: '8', 13: '9', 14: 'A', 15: 'B', 20: 'C', 21: 'D', 22: 'E', 23: 'F', 24: 'G', 25: 'H', 30: 'I', 31: 'J', 32: 'K', 33: 'L', 34: 'M', 35: 'N', 40: 'O', 41: 'P', 42: 'Q', 43: 'R', 44: 'S', 45: 'T', 50: 'U', 51: 'V', 52: 'W', 53: 'X', 54: 'Y', 55: 'Z'}) %}
        {% set HALF = 'I' %}
    {% endif %}
{% else %}
    {% set NUMBERS = SezimalDictionary({0: '0', 1: '1', 2: '2', 3: '3', 4: '4', 5: '5', 10: '10', 11: '11', 12: '12', 13: '13', 14: '14', 15: '15', 20: '20', 21: '21', 22: '22', 23: '23', 24: '24', 25: '25', 30: '30', 31: '31', 32: '32', 33: '33', 34: '34', 35: '35', 40: '40', 41: '41', 42: '42', 43: '43', 44: '44', 45: '45', 50: '50', 51: '51', 52: '52', 53: '53', 54: '54', 55: '55', 100: '100', 101: '101', 102: '102', 103: '103', 104: '104', 105: '105', 110: '110', 111: '111', 112: '112', 113: '113', 114: '114', 115: '115', 120: '120', 121: '121', 122: '122', 123: '123', 124: '124', 125: '125', 1404: '1404', 1415: '1415'}) %}

    {% set UTAS = SezimalDictionary({0: '00', 1: '01', 2: '02', 3: '03', 4: '04', 5: '05', 10: '10', 11: '11', 12: '12', 13: '13', 14: '14', 15: '15', 20: '20', 21: '21', 22: '22', 23: '23', 24: '24', 25: '25', 30: '30', 31: '31', 32: '32', 33: '33', 34: '34', 35: '35', 40: '40', 41: '41', 42: '42', 43: '43', 44: '44', 45: '45', 50: '50', 51: '51', 52: '52', 53: '53', 54: '54', 55: '55'}) %}
    {% set HOURS_24 = SezimalDictionary({0: '00', 1: '01', 2: '02', 3: '03', 4: '04', 5: '05', 10: '10', 11: '11', 12: '12', 13: '13', 14: '14', 15: '15', 20: '20', 21: '21', 22: '22', 23: '23', 24: '24', 25: '25', 30: '30', 31: '31', 32: '32', 33: '33', 34: '34', 35: '35', 40: '40', 41: '41', 42: '42', 43: '43', 44: '44', 45: '45', 50: '50', 51: '51', 52: '52', 53: '53', 54: '54', 55: '55'}) %}
    {% set HALF = '30' %}
    {% set SEPARATOR = locale.TIME_SEPARATOR %}
    {% set MIDDAY = 30 %}

    {% if sezimal_digits or '!' in format_token %}
        {% set NUMBERS = SezimalDictionary({0: 'Û±∏Ä', 1: 'Û±∏Å', 2: 'Û±∏Ç', 3: 'Û±∏É', 4: 'Û±∏Ñ', 5: 'Û±∏Ö', 10: 'Û±∏ÅÛ±∏Ä', 11: 'Û±∏ÅÛ±∏Å', 12: 'Û±∏ÅÛ±∏Ç', 13: 'Û±∏ÅÛ±∏É', 14: 'Û±∏ÅÛ±∏Ñ', 15: 'Û±∏ÅÛ±∏Ö', 20: 'Û±∏ÇÛ±∏Ä', 21: 'Û±∏ÇÛ±∏Å', 22: 'Û±∏ÇÛ±∏Ç', 23: 'Û±∏ÇÛ±∏É', 24: 'Û±∏ÇÛ±∏Ñ', 25: 'Û±∏ÇÛ±∏Ö', 30: 'Û±∏ÉÛ±∏Ä', 31: 'Û±∏ÉÛ±∏Å', 32: 'Û±∏ÉÛ±∏Ç', 33: 'Û±∏ÉÛ±∏É', 34: 'Û±∏ÉÛ±∏Ñ', 35: 'Û±∏ÉÛ±∏Ö', 40: 'Û±∏ÑÛ±∏Ä', 41: 'Û±∏ÑÛ±∏Å', 42: 'Û±∏ÑÛ±∏Ç', 43: 'Û±∏ÑÛ±∏É', 44: 'Û±∏ÑÛ±∏Ñ', 45: 'Û±∏ÑÛ±∏Ö', 50: 'Û±∏ÖÛ±∏Ä', 51: 'Û±∏ÖÛ±∏Å', 52: 'Û±∏ÖÛ±∏Ç', 53: 'Û±∏ÖÛ±∏É', 54: 'Û±∏ÖÛ±∏Ñ', 55: 'Û±∏ÖÛ±∏Ö', 100: 'Û±∏ÅÛ±∏ÄÛ±∏Ä', 101: 'Û±∏ÅÛ±∏ÄÛ±∏Å', 102: 'Û±∏ÅÛ±∏ÄÛ±∏Ç', 103: 'Û±∏ÅÛ±∏ÄÛ±∏É', 104: 'Û±∏ÅÛ±∏ÄÛ±∏Ñ', 105: 'Û±∏ÅÛ±∏ÄÛ±∏Ö', 110: 'Û±∏ÅÛ±∏ÅÛ±∏Ä', 111: 'Û±∏ÅÛ±∏ÅÛ±∏Å', 112: 'Û±∏ÅÛ±∏ÅÛ±∏Ç', 113: 'Û±∏ÅÛ±∏ÅÛ±∏É', 114: 'Û±∏ÅÛ±∏ÅÛ±∏Ñ', 115: 'Û±∏ÅÛ±∏ÅÛ±∏Ö', 120: 'Û±∏ÅÛ±∏ÇÛ±∏Ä', 121: 'Û±∏ÅÛ±∏ÇÛ±∏Å', 122: 'Û±∏ÅÛ±∏ÇÛ±∏Ç', 123: 'Û±∏ÅÛ±∏ÇÛ±∏É', 124: 'Û±∏ÅÛ±∏ÇÛ±∏Ñ', 125: 'Û±∏ÅÛ±∏ÇÛ±∏Ö', 1404: 'Û±∏ÅÛ±∏ÑÛ±∏ÄÛ±∏Ñ', 1415: 'Û±∏ÅÛ±∏ÑÛ±∏ÅÛ±∏Ö'}) %}

        {% set UTAS = SezimalDictionary({0: 'Û±∏ÄÛ±∏Ä', 1: 'Û±∏ÄÛ±∏Å', 2: 'Û±∏ÄÛ±∏Ç', 3: 'Û±∏ÄÛ±∏É', 4: 'Û±∏ÄÛ±∏Ñ', 5: 'Û±∏ÄÛ±∏Ö', 10: 'Û±∏ÅÛ±∏Ä', 11: 'Û±∏ÅÛ±∏Å', 12: 'Û±∏ÅÛ±∏Ç', 13: 'Û±∏ÅÛ±∏É', 14: 'Û±∏ÅÛ±∏Ñ', 15: 'Û±∏ÅÛ±∏Ö', 20: 'Û±∏ÇÛ±∏Ä', 21: 'Û±∏ÇÛ±∏Å', 22: 'Û±∏ÇÛ±∏Ç', 23: 'Û±∏ÇÛ±∏É', 24: 'Û±∏ÇÛ±∏Ñ', 25: 'Û±∏ÇÛ±∏Ö', 30: 'Û±∏ÉÛ±∏Ä', 31: 'Û±∏ÉÛ±∏Å', 32: 'Û±∏ÉÛ±∏Ç', 33: 'Û±∏ÉÛ±∏É', 34: 'Û±∏ÉÛ±∏Ñ', 35: 'Û±∏ÉÛ±∏Ö', 40: 'Û±∏ÑÛ±∏Ä', 41: 'Û±∏ÑÛ±∏Å', 42: 'Û±∏ÑÛ±∏Ç', 43: 'Û±∏ÑÛ±∏É', 44: 'Û±∏ÑÛ±∏Ñ', 45: 'Û±∏ÑÛ±∏Ö', 50: 'Û±∏ÖÛ±∏Ä', 51: 'Û±∏ÖÛ±∏Å', 52: 'Û±∏ÖÛ±∏Ç', 53: 'Û±∏ÖÛ±∏É', 54: 'Û±∏ÖÛ±∏Ñ', 55: 'Û±∏ÖÛ±∏Ö'}) %}
        {% set HALF = 'Û±∏ÉÛ±∏Ä' %}
        {% set SEPARATOR = 'Û±π∑' %}
    {% endif %}
{% endif %}

{% set MONTH_LINE_HEIGHT = '2.25rem' %}
{% set WEEK_LINE_HEIGHT = '2.25rem' %}
{% set MONTH_FONT_SIZE = '1.25rem' %}
{% set WEEK_FONT_SIZE = '0.80rem' %}
{% set EMOJI_FONT_SIZE = '1.5rem' %}
{% set DATE_FONT_SIZE = '1.30rem' %}
{% set TODAY_FONT_SIZE = '1.60rem' %}
{% set EVENTS_FONT_SIZE = '1rem' %}
{% set EVENTS_LINE_HEIGHT = '2rem' %}

{% if locale.DIGITS and (base in (10, 14)) and (format_token != '!') %}
    {% for i in NUMBERS %}
        {% set NUMBERS = NUMBERS.update({i: locale.digit_replace(NUMBERS[i])}) %}
    {% endfor %}
    {% for i in UTAS %}
        {% set UTAS = UTAS.update({i: locale.digit_replace(UTAS[i])}) %}
    {% endfor %}
    {% set HALF = locale.digit_replace(HALF) %}
{% endif %}

{% if locale.calendar_displayed in ('SYM', 'ISO') %}
    {% set DAILY_COLORS = colors[date.week_in_year] %}
{% elif locale.calendar_displayed == 'DCC' %}
    {% set DAILY_COLORS = colors[date.dcc_week_in_year] %}
{% endif %}

{% if locale.calendar_displayed == 'SYM' %}
    {% set date_format = locale.DATE_LONG_FORMAT %}
    {% set week_in_quarter_format = '#' + format_token + '-wQ/#' + format_token + 'twQ' %}
    {% set day_in_quarter_format = '#' + format_token + '-dQ/#' + format_token + 'tdQ' %}
    {% set week_in_year_format = '#' + format_token + '-wY/#' + format_token + 'twY' %}
    {% set day_in_year_format = '#' + format_token + '-dY/#' + format_token + 'tdY' %}
    {% set event_month = date.month %}
    {% set event_day = date.day %}
{% elif locale.calendar_displayed == 'ISO' %}
    {% set date_format = locale.ISO_DATE_LONG_FORMAT %}
    {% set week_in_quarter_format = '#' + format_token + '-wQ/#' + format_token + 'twQ' %}
    {% set day_in_quarter_format = '#' + format_token + '-dQ/#' + format_token + 'tdQ' %}
    {% set week_in_year_format = '#' + format_token + '-wY/#' + format_token + 'twY' %}
    {% set day_in_year_format = '#' + format_token + '-dY/#' + format_token + 'tdY' %}
    {% set event_month = date.gregorian_month %}
    {% set event_day = date.gregorian_day %}
{% elif locale.calendar_displayed == 'DCC' %}
    {% if 'c' in format_token %}
        {% set date_format = locale.ADC_DATE_LONG_FORMAT %}
    {% else %}
        {% set date_format = locale.DCC_DATE_LONG_FORMAT %}
    {% endif %}
    {% set week_in_quarter_format = '&' + format_token + '-wT/&' + format_token + 'twT' %}
    {% set day_in_quarter_format = '&' + format_token + '-dT/&' + format_token + 'tdT' %}
    {% set week_in_year_format = '&' + format_token + '-wY/&' + format_token + 'twY' %}
    {% set day_in_year_format = '&' + format_token + '-dY/&' + format_token + 'tdY' %}
    {% set event_month = date.dcc_month %}
    {% set event_day = date.dcc_day %}
{% endif %}


<div id="calendar_header" class="calendar-header-fixed">
{% include 'calendar_view_change_view.html' %}

<table class="center" style="border-spacing: 0px;">
    <colgroup>
        <col span="1" width="5%">
        <col span="1">
        <col span="1" width="5%">
    </colgroup>
    <tr>
        <td colspan="3" style="font-size: 0.5rem; line-height: 0.5rem;">¬†</td>
    </tr>
    <tr style="vertical-align: middle;">
        <td style="font-size: 1.25rem; line-height: 2.25rem; font-weight: bold; background-color: white; color: black;" onclick="update_calendar('previous', 'day')">‚Äπ</td>
        <td style="font-size: 1.25rem; line-height: 2.25rem; font-weight: bold; background-color: white; color: black;">
            {%- if locale.calendar_displayed == 'DCC' and 'c' in format_token -%}
                    {{ date.format(locale.ADC_YEAR_TEXT_MONTH_FORMAT, locale) }}
                    {%- with dcc_month_number = date.dcc_month -%}
                        &nbsp;{%- include 'calendar_span_adc_month_symbol.html' -%}
                    {%- endwith -%}
                    {%- if base in (14, 20) -%}
                        {{ date.format('&-wM‚Äê&-w', locale) }}
                    {%- else -%}
                        {{ date.format('&DYMS&' + format_token + '-d', locale) }}
                    {%- endif -%}
            {%- else -%}
                {{ date.format(date_format, locale) }}
            {%- endif -%}
        </td>
        <td style="font-size: 1.25rem; line-height: 2.25rem; font-weight: bold; background-color: white; color: black;" onclick="update_calendar('next', 'day')">‚Ä∫</td>
    </tr>
    <tr>
        <td colspan="3" style="font-size: 0.5rem; line-height: 0.5rem;">¬†</td>
    </tr>
</table>
<table class="center" style="border-spacing: 0px;">
    <colgroup>
        <col span="1">
        <col span="1" width="40%">
        <col span="1">
    </colgroup>
    <tr style="vertical-align: middle; background-color: {{DAILY_COLORS[shade_month]}}; color: {{'black' if gray_scale else 'white'}}; font-weight: bold;">
        <td style="line-height: {{MONTH_LINE_HEIGHT}};">
            <div id="" style="z-index: 1; width: 100%; float: {{ 'right' if locale.RTL else 'left' }}; border-{{ 'left' if locale.RTL else 'right' }}: 2px solid {{DAILY_COLORS[back_shade_04]}};">
                {{locale.WEEK_NUMBER_SYMBOL}} {{ date.format(week_in_quarter_format, locale) }}<span class="hide-in-mobile-daily-view-day-in-quarter-year"> ‚Äï {{locale.DAY_NUMBER_SYMBOL}} {{ date.format(day_in_quarter_format, locale) }}</span>
            </div>
            <div id="quarter_proportion" style="height: {{MONTH_LINE_HEIGHT}}; background-color: {{DAILY_COLORS[back_shade_04]}}; width: {{ date.dcc_term_proportion_ellapsed.decimal * 100 if locale.calendar_displayed == 'DCC' else date.quarter_proportion_ellapsed.decimal * 100 }}%; z-index: -1;"></div>
        </td>
        <td style="line-height: {{MONTH_LINE_HEIGHT}}; font-size: {{MONTH_FONT_SIZE}};">
            {%- if locale.calendar_displayed == 'DCC' -%}
                {%- if 'c' in format_token -%}
                    {{ date.format('&' + format_token + 'W &iW &' + format_token + 'D &iD', locale) }}
                {%- endif -%}
                {%- if 'c' not in format_token -%}
                    {{ date.format('&' + format_token + 'D', locale) }}
                {%- endif -%}
            {%- else -%}
                {{ date.format('#W', locale) }}
            {%- endif -%}
        </td>
        <td style="line-height: {{MONTH_LINE_HEIGHT}};">
            <div id="" style="z-index: 1; width: 100%; float: {{ 'left' if locale.RTL else 'right' }}; border-{{ 'right' if locale.RTL else 'left' }}: 2px solid {{DAILY_COLORS[back_shade_04]}};">
                {{locale.WEEK_NUMBER_SYMBOL}} {{ date.format(week_in_year_format, locale) }}<span class="hide-in-mobile-daily-view-day-in-quarter-year"> ‚Äï {{locale.DAY_NUMBER_SYMBOL}} {{ date.format(day_in_year_format, locale) }}</span>
            </div>
            <div id="year_proportion" style="height: {{MONTH_LINE_HEIGHT}}; background-color: {{DAILY_COLORS[back_shade_04]}}; width: {{ date.dcc_year_proportion_ellapsed.decimal * 100 if locale.calendar_displayed == 'DCC' else date.year_proportion_ellapsed.decimal * 100 }}%; z-index: -1;"></div>
        </td>
    </tr>
</table>
<table class="center" style="border-spacing: 0px;">
    <colgroup>
        <col span="1">
        <col span="1">
    </colgroup>
    <tr style="vertical-align: middle; color: {{DAILY_COLORS[shade_01]}}; font-size: {{EVENTS_FONT_SIZE}}; line-height: {{EVENTS_LINE_HEIGHT}};">
        <td style="text-align: {{ 'right' if locale.RTL else 'left' }};">
            {%- if event_month in events -%}
                {%- if event_day in events[event_month] -%}
                    {%- for event in events[event_month][event_day] -%}
                        &nbsp;<span class="emoji">{{ event.emoji.replace('üïáÔ∏è', '‚úùÔ∏è').replace('üïÜ', '‚úùÔ∏è') }}</span> - {{ event.name }};
                    {%- endfor -%}
                {%- endif -%}
            {%- endif -%}

            {%- if event_month in events['moon'] -%}
                {%- if event_day in events['moon'][event_month] -%}
                    {%- for event in events['moon'][event_month][event_day] -%}
                        &nbsp;<span class="emoji moon-emoji">{{ event.emoji }}</span> - {{ event.name }};
                    {%- endfor -%}
                {%- endif -%}
            {%- endif -%}
        </td>
        <td style="text-align: {{ 'left' if locale.RTL else 'right' }};">
            {%- if locale.calendar_displayed == 'SYM' -%}
                &nbsp;{{ locale.CALENDAR_TYPE_ABBREVIATION['ISO'] }}&nbsp; {{date.format(locale.ISO_DATE_FORMAT, locale)}}&nbsp;
                <br/>
                &nbsp;{{ locale.CALENDAR_TYPE_ABBREVIATION['DCC'] }}&nbsp; {{date.format(locale.DCC_DATE_FORMAT, locale)}}&nbsp;
            {%- elif locale.calendar_displayed == 'ISO' -%}
                &nbsp;{{ locale.CALENDAR_TYPE_ABBREVIATION['SYM'] }}&nbsp; {{date.format(locale.DATE_FORMAT, locale)}}&nbsp;
                <br/>
                &nbsp;{{ locale.CALENDAR_TYPE_ABBREVIATION['DCC'] }}&nbsp; {{date.format(locale.DCC_DATE_FORMAT, locale)}}&nbsp;
            {%- elif locale.calendar_displayed == 'DCC' -%}
                &nbsp;{{ locale.CALENDAR_TYPE_ABBREVIATION['ISO'] }}&nbsp;{%- if locale.calendar_displayed == 'DCC' and locale.DATE_ENDIANNES != 'B' -%}{{ date.format('#@W, ', locale) }}{%- endif -%}{{date.format(locale.ISO_DATE_FORMAT, locale)}}{%- if locale.calendar_displayed == 'DCC' and locale.DATE_ENDIANNES == 'B' -%}{{ date.format(', #@W', locale) }}{%- endif -%}&nbsp;
                <br/>
                &nbsp;{{ locale.CALENDAR_TYPE_ABBREVIATION['SYM'] }}&nbsp;{%- if locale.calendar_displayed == 'DCC' and locale.DATE_ENDIANNES != 'B' -%}{{ date.format('#@W, ', locale) }}{%- endif -%}{{date.format(locale.DATE_FORMAT, locale)}}{%- if locale.calendar_displayed == 'DCC' and locale.DATE_ENDIANNES == 'B' -%}{{ date.format(', #@W', locale) }}{%- endif -%}&nbsp;
            {%- endif -%}
            {%- if 'CHR' in locale.SHOW_HOLIDAYS -%}
                <br/>
                &nbsp;{{date.date.julian_date(locale)}}&nbsp;
            {%- endif -%}
            {%- if 'JEW' in locale.SHOW_HOLIDAYS -%}
                <br/>
                &nbsp;{{date.date.hebrew_date(locale, number=False, short=False)}}&nbsp;
            {%- endif -%}
            {%- if 'HIJ' in locale.SHOW_HOLIDAYS -%}
                <br/>
                &nbsp;{{date.date.hijri_date(locale, number=False, short=False)}}&nbsp;
            {%- endif -%}
        </td>
    </tr>
</table>
</div>
<table class="center" style="border-spacing: 0px;" id="time_table">
    <colgroup>
        <col span="1">
        <col span="1">
        <col span="1">
        <col span="1">
        <col span="1">
        <col span="1">
        <col span="1">
        <col span="1">
    </colgroup>
    {%- for uta in SezimalList(UTAS.keys())[uta_first:uta_last] -%}
        {%- set time_id = HOURS_24[uta] -%}
        {%- if base != 20 -%}
            <tr style="vertical-align: top; background-color: {%- if dark_mode -%}#000{%- else -%}#fff{%- endif -%};" id="time_{{time_id}}">
                <td style="line-height: {{WEEK_LINE_HEIGHT}}; font-weight: bold; font-size: {{DATE_FONT_SIZE}}; color: {{DAILY_COLORS['100' if uta < MIDDAY else '300']}}; border-{{ 'left' if locale.RTL else 'right' }}: 1px solid {{DAILY_COLORS[shade_week_number]}};">
                    {{UTAS[uta]}}{%- if base == 14 and locale.HOUR_FORMAT == '12h' -%}<span style="font-size: {{WEEK_FONT_SIZE}};" class="hide-in-mobile-daily-view-am-pm">{{ ('‚ÄØ' + locale.lower(locale.AM)) if uta < 20 else ('¬†' + locale.lower(locale.PM)) }}</span>{%- endif -%}
                </td>
                <td colspan="7" style="line-height: {{WEEK_LINE_HEIGHT}}; font-weight: bold; font-size: {{DATE_FONT_SIZE}}; color: {{DAILY_COLORS[shade_01]}};"></td>
            </tr>
            <tr style="vertical-align: top; background-color: {%- if dark_mode -%}#111{%- else -%}#eee{%- endif -%}" id="time_{{time_id}}_half">
                <td style="line-height: {{WEEK_LINE_HEIGHT}}; font-size: {{HALF_UTA_FONT_SIZE}}; color: {{DAILY_COLORS['100' if uta < MIDDAY else '300']}}; border-{{ 'left' if locale.RTL else 'right' }}: 1px solid {{DAILY_COLORS[shade_week_number]}};">
                    <span class="hide-in-mobile">{{UTAS[uta]}}{{SEPARATOR}}</span>{{HALF}}
                </td>
                <td colspan="7" style="line-height: {{WEEK_LINE_HEIGHT}}; font-size: {{DATE_FONT_SIZE}}; color: {{DAILY_COLORS[shade_01]}};"></td>
            </tr>
        {%- else -%}
            {%- if uta % 2 == 0 -%}
                <tr style="vertical-align: top; background-color: #111;" id="time_{{time_id}}">
                    <td style="line-height: {{WEEK_LINE_HEIGHT}}; font-weight: bold; font-size: {{DATE_FONT_SIZE}}; color: {{DAILY_COLORS['100' if uta < MIDDAY else '300']}}; border-{{ 'left' if locale.RTL else 'right' }}: 1px solid {{DAILY_COLORS[shade_week_number]}};">
                        {{UTAS[uta]}}
                    </td>
                    <td colspan="7" style="line-height: {{WEEK_LINE_HEIGHT}}; font-weight: bold; font-size: {{DATE_FONT_SIZE}}; color: {{DAILY_COLORS[shade_01]}};"></td>
                </tr>
            {%- else -%}
                <tr style="vertical-align: top;" id="time_{{time_id}}">
                    <td style="line-height: {{WEEK_LINE_HEIGHT}}; font-size: {{HALF_UTA_FONT_SIZE}}; color: {{DAILY_COLORS['100' if uta < MIDDAY else '300']}}; border-{{ 'left' if locale.RTL else 'right' }}: 1px solid {{DAILY_COLORS[shade_week_number]}};">
                        {{UTAS[uta]}}
                    </td>
                    <td colspan="7" style="line-height: {{WEEK_LINE_HEIGHT}}; font-size: {{DATE_FONT_SIZE}}; color: {{DAILY_COLORS[shade_01]}};"></td>
                </tr>
            {%- endif -%}
        {%- endif -%}
    {%- endfor -%}
</table>
<div class="calendar-time-pointer" id="time_pointer"></div>

<script type="text/javascript" id="view_script">
function auto_refresh(){
    const time_pointer_half_height = parseFloat(getComputedStyle(document.getElementById('time_pointer')).fontSize) * 1.2 / 2;
    const header_height = document.getElementById('calendar_header').getBoundingClientRect().height;

    document.getElementById('time_table').setAttribute(
        'style',
        'border-spacing: 0px; padding-top: ' + header_height + 'px;'
    );

    var seconds = new Date().getTime();
    var position = 0;
    var time_display = '';
    var time_line_id;
    var time_line_rect;

    seconds = (seconds + ({{date.time._time_zone_offset.decimal}}  * 50000 / 27)) / 1000 / 86400;
    seconds = seconds - Math.floor(seconds);

    var sec = Math.floor(seconds * 60 * 60 * 24);

    var hours = Math.floor(sec / 60 / 60);
    sec = sec - (hours * 60 * 60);

    var minutes = Math.floor(sec / 60);
    sec = sec - (minutes * 60);

    minutes = minutes.toString().padStart(2, '0');
    sec = sec.toString().padStart(2, '0');
    var hours_24 = hours.toString().padStart(2, '0');

    {% if locale.HOUR_FORMAT == '12h' %}
        if (hours > 12) {
            hours = hours - 12;
            minutes = minutes + '‚ÄØ{{ locale.lower(locale.PM) }}';
        } else if (hours == 12) {
            minutes = minutes + '‚ÄØ{{ locale.lower(locale.PM) }}';
        } else {
            minutes = minutes + '‚ÄØ{{ locale.lower(locale.AM) }}';
        };
    {% endif %}

    hours = hours.toString().padStart(2, '0');

    {% if base == 10 or base == 100 %}
        {% if '!' in format_token %}
            const PAIRS = {
                '00': 'Û±∏ÄÛ±∏Ä', '01': 'Û±∏ÄÛ±∏Å', '02': 'Û±∏ÄÛ±∏Ç', '03': 'Û±∏ÄÛ±∏É', '04': 'Û±∏ÄÛ±∏Ñ', '05': 'Û±∏ÄÛ±∏Ö',
                '10': 'Û±∏ÅÛ±∏Ä', '11': 'Û±∏ÅÛ±∏Å', '12': 'Û±∏ÅÛ±∏Ç', '13': 'Û±∏ÅÛ±∏É', '14': 'Û±∏ÅÛ±∏Ñ', '15': 'Û±∏ÅÛ±∏Ö',
                '20': 'Û±∏ÇÛ±∏Ä', '21': 'Û±∏ÇÛ±∏Å', '22': 'Û±∏ÇÛ±∏Ç', '23': 'Û±∏ÇÛ±∏É', '24': 'Û±∏ÇÛ±∏Ñ', '25': 'Û±∏ÇÛ±∏Ö',
                '30': 'Û±∏ÉÛ±∏Ä', '31': 'Û±∏ÉÛ±∏Å', '32': 'Û±∏ÉÛ±∏Ç', '33': 'Û±∏ÉÛ±∏É', '34': 'Û±∏ÉÛ±∏Ñ', '35': 'Û±∏ÉÛ±∏Ö',
                '40': 'Û±∏ÑÛ±∏Ä', '41': 'Û±∏ÑÛ±∏Å', '42': 'Û±∏ÑÛ±∏Ç', '43': 'Û±∏ÑÛ±∏É', '44': 'Û±∏ÑÛ±∏Ñ', '45': 'Û±∏ÑÛ±∏Ö',
                '50': 'Û±∏ÖÛ±∏Ä', '51': 'Û±∏ÖÛ±∏Å', '52': 'Û±∏ÖÛ±∏Ç', '53': 'Û±∏ÖÛ±∏É', '54': 'Û±∏ÖÛ±∏Ñ', '55': 'Û±∏ÖÛ±∏Ö',
            };
            const TIME_SEPARATOR = 'Û±π∑';
        {% elif format_token == '@' %}
            const PAIRS = {
                '00': '0', '01': '1', '02': '2', '03': '3', '04': '4', '05': '5',
                '10': '0Ãá', '11': '1Ãá', '12': '2Ãá', '13': '3Ãá', '14': '4Ãá', '15': '5Ãá',
                '20': '0Ãà', '21': '1Ãà', '22': '2Ãà', '23': '3Ãà', '24': '4Ãà', '25': '5Ãà',
                '30': '0Ãä', '31': '1Ãä', '32': '2Ãä', '33': '3Ãä', '34': '4Ãä', '35': '5Ãä',
                '40': '0ÃÑ', '41': '1ÃÑ', '42': '2ÃÑ', '43': '3ÃÑ', '44': '4ÃÑ', '45': '5ÃÑ',
                '50': '0ÃÜ', '51': '1ÃÜ', '52': '2ÃÜ', '53': '3ÃÜ', '54': '4ÃÜ', '55': '5ÃÜ',
            };
            const TIME_SEPARATOR = 'Û±π∑';
        {% elif format_token == '@!' %}
            const PAIRS = {
                '00': 'Û±∏Ä', '01': 'Û±∏Å', '02': 'Û±∏Ç', '03': 'Û±∏É', '04': 'Û±∏Ñ', '05': 'Û±∏Ö',
                '10': 'Û±∏Ü', '11': 'Û±∏á', '12': 'Û±∏à', '13': 'Û±∏â', '14': 'Û±∏ä', '15': 'Û±∏ã',
                '20': 'Û±∏å', '21': 'Û±∏ç', '22': 'Û±∏é', '23': 'Û±∏è', '24': 'Û±∏ê', '25': 'Û±∏ë',
                '30': 'Û±∏í', '31': 'Û±∏ì', '32': 'Û±∏î', '33': 'Û±∏ï', '34': 'Û±∏ñ', '35': 'Û±∏ó',
                '40': 'Û±∏ò', '41': 'Û±∏ô', '42': 'Û±∏ö', '43': 'Û±∏õ', '44': 'Û±∏ú', '45': 'Û±∏ù',
                '50': 'Û±∏û', '51': 'Û±∏ü', '52': 'Û±∏†', '53': 'Û±∏°', '54': 'Û±∏¢', '55': 'Û±∏£',
            };
            const TIME_SEPARATOR = 'Û±π∑';
        {% elif format_token == 'Z' %}
            const PAIRS = {
                '00': '0', '01': '1', '02': '2', '03': '3', '04': '4', '05': '5',
                '10': '6', '11': '7', '12': '8', '13': '9', '14': 'A', '15': 'B',
                '20': 'C', '21': 'D', '22': 'E', '23': 'F', '24': 'G', '25': 'H',
                '30': 'I', '31': 'J', '32': 'K', '33': 'L', '34': 'M', '35': 'N',
                '40': 'O', '41': 'P', '42': 'Q', '43': 'R', '44': 'S', '45': 'T',
                '50': 'U', '51': 'V', '52': 'W', '53': 'X', '54': 'Y', '55': 'Z',
            };
            const TIME_SEPARATOR = '{{ locale.TIME_SEPARATOR }}';
        {% else %}
            const TIME_SEPARATOR = '{{ locale.TIME_SEPARATOR }}';
        {% endif %}

        var agrima = seconds * 36 * 36 * 36;
        var time = Math.floor(agrima).toString(6).padStart(6, '0');
        var uta = time.slice(0, 2);
        var posha = time.slice(2, 4);
        var agrima = time.slice(4, 6);

        //
        // Seconds is adjusted to a proportion of 30 posha,
        // so the time pointer gets positioned within
        // each halt uta time line
        //
        seconds = parseInt(agrima, 6) * 86400 / 36 / 36 / 36;

        if (posha.slice(0) >= '3') {
            time_line_id = 'time_' + uta + '_half';
            seconds = seconds + ((parseInt(posha, 6) - parseInt('30', 6)) * 86400 / 36 / 36);
        } else {
            time_line_id = 'time_' + uta;
            seconds = seconds + (parseInt(posha, 6) * 86400 / 36 / 36);
        }

        seconds = seconds / (parseInt('30', 6) * 86400 / 36 / 36);

        {% if format_token in ('!', '@', '@!', 'Z') %}
            time_display = PAIRS[uta] + TIME_SEPARATOR + PAIRS[posha];
        {% else %}
            time_display = uta + TIME_SEPARATOR + posha;
        {% endif %}

        {% if locale.RTL %}
            time_display = '\u{2066}' + time_display + '\u{2069} - \u{2066}' + hours + '{{ locale.TIME_SEPARATOR }}' + minutes + '\u{2069}';
        {% else %}
            time_display = time_display + ' - ' + hours + '{{ locale.TIME_SEPARATOR }}' + minutes;
        {% endif %}

        setTimeout(auto_refresh, 33333);
    {% elif base == 14 %}
        {% if locale.RTL %}
            time_display = '\u{2066}' + hours + '{{ locale.TIME_SEPARATOR }}' + minutes + '\u{2069}';
        {% else %}
            time_display = hours + '{{ locale.TIME_SEPARATOR }}' + minutes;
        {% endif %}

        //
        // Seconds is adjusted to a proportion of 30 posha,
        // so the time pointer gets positioned within
        // each halt uta time line
        //
        seconds = parseInt(sec) * 86400 / 24 / 60 / 60;

        if (minutes.slice(0) >= '3') {
            time_line_id = 'time_' + hours_24 + '_half';
            seconds = seconds + ((parseInt(minutes) - 30) * 86400 / 24 / 60);
        } else {
            time_line_id = 'time_' + hours_24;
            seconds = seconds + (parseInt(minutes) * 86400 / 24 / 60);
        }

        seconds = seconds / (30 * 86400 / 24 / 60);

        setTimeout(auto_refresh, 30000);
    {% elif base == 20 %}
        var time = seconds * 12 * 12 * 12;
        time = Math.floor(time).toString(12).padStart(3, '0');

        //
        // Seconds is adjusted to a proportion of 30 minutes,
        // so the time pointer gets positioned within
        // each 30 minutes time line
        //
        if ((time.slice(1, 2) == '0') || (time.slice(1, 2) == '1') || (time.slice(1, 2) == '2')) {
            time_line_id = 'time_' + time.slice(0, 1) + '0';
            seconds = parseInt(time.slice(1, 3), '12');
        } else if ((time.slice(1, 2) == '3') || (time.slice(1, 2) == '4') || (time.slice(1, 2) == '5')) {
            time_line_id = 'time_' + time.slice(0, 1) + '3';
            seconds = parseInt(time.slice(1, 3), '12') - parseInt('30', 12);
        } else if ((time.slice(1, 2) == '6') || (time.slice(1, 2) == '7') || (time.slice(1, 2) == '8')) {
            time_line_id = 'time_' + time.slice(0, 1) + '6';
            seconds = parseInt(time.slice(1, 3), '12') - parseInt('60', 12);
        } else {
            time_line_id = 'time_' + time.slice(0, 1) + '9';
            seconds = parseInt(time.slice(1, 3), '12') - parseInt('90', 12);
        }

        time = time.replaceAll('a', '‚Üä').replaceAll('b', '‚Üã');
        time_line_id = time_line_id.replaceAll('a', '‚Üä').replaceAll('b', '‚Üã');
        seconds = seconds / parseInt('30', 12);

        {% if locale.RTL %}
            time_display = '\u{2066}' + time + '\u{2069} - \u{2066}' + hours + '{{ locale.TIME_SEPARATOR }}' + minutes + '\u{2069}';
        {% else %}
            time_display = time + ' - ' + hours + '{{ locale.TIME_SEPARATOR }}' + minutes;
        {% endif %}

        setTimeout(auto_refresh, 25000);
    {% endif %}

    time_line_rect = document.getElementById(time_line_id).getBoundingClientRect();
    position = (seconds * time_line_rect.height) + time_line_rect.top + window.scrollY - time_pointer_half_height;

    {% if locale.DIGITS and (base in (10, 14)) and (format_token != '!') %}
        time_display = time_display.replaceAll('0', '{{ locale.DIGITS[0] }}');
        time_display = time_display.replaceAll('1', '{{ locale.DIGITS[1] }}');
        time_display = time_display.replaceAll('2', '{{ locale.DIGITS[2] }}');
        time_display = time_display.replaceAll('3', '{{ locale.DIGITS[3] }}');
        time_display = time_display.replaceAll('4', '{{ locale.DIGITS[4] }}');
        time_display = time_display.replaceAll('5', '{{ locale.DIGITS[5] }}');
        time_display = time_display.replaceAll('6', '{{ locale.DIGITS[6] }}');
        time_display = time_display.replaceAll('7', '{{ locale.DIGITS[7] }}');
        time_display = time_display.replaceAll('8', '{{ locale.DIGITS[8] }}');
        time_display = time_display.replaceAll('9', '{{ locale.DIGITS[9] }}');

        iso_time_display = iso_time_display.replaceAll('0', '{{ locale.DIGITS[0] }}');
        iso_time_display = iso_time_display.replaceAll('1', '{{ locale.DIGITS[1] }}');
        iso_time_display = iso_time_display.replaceAll('2', '{{ locale.DIGITS[2] }}');
        iso_time_display = iso_time_display.replaceAll('3', '{{ locale.DIGITS[3] }}');
        iso_time_display = iso_time_display.replaceAll('4', '{{ locale.DIGITS[4] }}');
        iso_time_display = iso_time_display.replaceAll('5', '{{ locale.DIGITS[5] }}');
        iso_time_display = iso_time_display.replaceAll('6', '{{ locale.DIGITS[6] }}');
        iso_time_display = iso_time_display.replaceAll('7', '{{ locale.DIGITS[7] }}');
        iso_time_display = iso_time_display.replaceAll('8', '{{ locale.DIGITS[8] }}');
        iso_time_display = iso_time_display.replaceAll('9', '{{ locale.DIGITS[9] }}');
    {% endif %}

    if (document.getElementById('time_pointer')) {
        document.getElementById('time_pointer').innerHTML = '<span style="margin-{{ 'right' if locale.RTL else 'left' }}: 12.5%;">¬†‚óÇ¬†' + time_display + '¬†‚ñ∏¬†</span>';
        document.getElementById('time_pointer').setAttribute('style', 'top: ' + position + 'px;');
    };
};
auto_refresh();

//
// When first loading the page, makes
// shure the current time is visible
//
document.getElementById('time_pointer').scrollIntoView({
    block: 'center',
    inline: 'center'
});
</script>
